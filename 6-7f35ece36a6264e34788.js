(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{164:function(e,t,n){var r=n(25).f,o=Function.prototype,i=/^\s*function ([^ (]*)/;"name"in o||n(18)&&r(o,"name",{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},165:function(e,t){t.debounce=function(e,t,n){var r;return void 0===t&&(t=50),void 0===n&&(n={isImmediate:!1}),function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=this,s=n.isImmediate&&void 0===r;void 0!==r&&clearTimeout(r),r=setTimeout(function(){r=void 0,n.isImmediate||e.apply(a,o)},t),s&&e.apply(a,o)}}},166:function(e,t,n){var r,o,i,a,s,u,c,l,d;window,e.exports=(r=n(137),o=n(136),i=n(138),a=n(135),s=n(139),u=n(0),c=n(140),l=n(141),d=n(142),function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t){e.exports=r},function(e,t){e.exports=o},function(e,t){e.exports=i},function(e,t){e.exports=a},function(e,t){e.exports=s},function(e,t){e.exports=u},function(e,t){e.exports=c},function(e,t){e.exports=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10);function o(e){for(var t="",n=0;n<e.length;n++)t+=e[n].toString(16).padStart(2,"0");return t}t.generateUUIDv4=function(){var e=r.getRandomBytes(16);return e[6]=15&e[6]|64,e[8]=191&e[8]|128,o(e.subarray(0,4))+"-"+o(e.subarray(4,6))+"-"+o(e.subarray(6,8))+"-"+o(e.subarray(8,10))+"-"+o(e.subarray(10,16))}},function(e,t){e.exports=d},function(e,t,n){"use strict";function r(e){for(var t=Math.pow(2,8*e.byteLength/e.length),n=0;n<e.length;n++)e[n]=Math.random()*t}Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomValuesWithMathRandom=r,t.getRandomValues="undefined"!=typeof crypto?crypto.getRandomValues.bind(crypto):"undefined"!=typeof msCrypto?msCrypto.getRandomValues.bind(msCrypto):r,t.getRandomBytes=function(e){var n=new Uint8Array(e);return t.getRandomValues(n),n}},function(e,t,n){"use strict";n.r(t);var r=n(5),o=n.n(r),i=n(7),a=n(6),s=n(3),u=n(1),c=n(2),l=n(0),d=n(8);function f(e,t){return parseFloat(t)-parseFloat(e)}var p,m=Object(u.createDebuggers)("ide-tree"),b=(m.debugBase,m.debugComp,m.debugError,m.debugIO),h=m.debugInteract,y=m.debugMini,g=m.debugModel,v=m.debugRender,S=["screenId","name","id","attrs","children"],O=l.types.model("SchemaModel",{id:l.types.string,screenId:l.types.optional(l.types.string,"_unset"),name:l.types.optional(l.types.string,""),attrs:l.types.optional(l.types.string,"{}"),parentId:l.types.optional(l.types.string,""),children:l.types.array(l.types.late(function(){return O}))}).views(function(e){return{get attrsJSON(){return JSON.parse(e.attrs)},get childrenIds(){return(e.children||[]).map(function(e){return e.id})},get schemaJSON(){return Object(s.map)(e,function(e){return Object.assign({},e.attrsJSON,{id:e.id,screenId:e.screenId,name:e.name})},!0)},get allNodes(){return W(e)},get isRoot(){return!!e.parentId}}}).actions(function(e){return{setParentId:function(t){Object(u.invariant)(!!t,"不能将 id 设置成空"),e.parentId=t},setChildren:function(t){t.forEach(function(t){t.setParentId(e.id)}),e.children=t||[]},setId:function(t){Object(u.invariant)(!!t,"将要更改的 id 为空"),e.id=t},setScreenId:function(t){Object(u.invariant)(!!t,"目标 screenId 不应该为空");var n=Object(s.traverse)(e,function(e){return e.screenId==t},s.TRAVERSE_TYPE.BFS,!0);Object(u.invariant)(!n,"修改不生效，因为目标 screenId 已存在"),e.screenId=t},setName:function(t){Object(u.invariant)(!!t,"不能将 name 更改为空值"),e.name=t},setAttrs:function(t){e.attrs=E(t)}}}).views(function(e){return{findNode:function(t,n){return g("[findNode] 开始查找节点 "+t+", filterArray: "+n),j(e,t,n)},indexOfChild:function(e){return e?(this.children||[]).map(function(e){return e.id}).indexOf(e):-1},allNodesWithFilter:function(t){void 0===t&&(t=S);var n=[].concat(t||[]);return e.allNodes.map(function(e){return Object(u.pick)(e,n)})},clone:function(){var t=Object(s.map)(e,function(e){var t=P(e.screenId),n=x(e.name),r=x(e.name,!0),o=JSON.stringify(e.attrsJSON).replace(t,n);return O.create({name:e.name,attrs:o,id:r,screenId:n})},!0,function(e,t){e.setChildren(t)});return g("[clone] 将节点 "+e.id+" 拷贝成新节点 "+t.id+", 生成的节点对象：%o",t),t}}}).actions(function(e){return{updateAttribute:function(t,n){return R(e,t,n)},updateAttributeById:function(t,n,r){if(!t)return!1;var o=e.findNode(t);return!!o&&R(o,n,r)},addChildren:function(t){[].concat(t).forEach(function(t){t.setParentId(e.id),e.children.push(t)})}}}).actions(function(e){return{removeNode:function(t){if(!t)return!1;var n=e.findNode(t);if(n){var r=n.toJSON();return Object(l.destroy)(n),r}return!1}}}).actions(function(e){return{cloneFromSubId:function(t){var n=e.findNode(t);return g("[cloneFromSubId] 拷贝生成的节点 id "+(n&&n.id)),{origin:n,target:n&&n.clone()}}}}).actions(function(e){return{addChild:function(t,n){var r=e.children.length;if(r){var o=Object(u.isExist)(n)?+n:r;t.setParentId(e.id),e.children.splice(o,0,t)}else e.addChildren(t)}}}).actions(function(e){return{removeChildren:function(t){var n=[].concat(t);g("[comp] 删除前 children 长度: "+e.children.length+", 待删除的 ids: "+n.join("、"));var r=[].concat(e.childrenIds),o=n.map(function(e){return r.indexOf(e)});o.sort(f),o.forEach(function(t){if(-1!==t){var n=e.children[t];Object(l.destroy)(n)}}),g("[comp] 删除后 children 长度: "+e.children.length+"，ids: "+e.children.map(function(e){return e.id}).join("、"))}}}).actions(function(e){return{addSibling:function(t,n,r){if(void 0===r&&(r=0),!Object(u.isExist)(t.parentId))return g("[addSibling] 节点 "+t.id+" 无父元素，无法进行新增兄弟节点的操作"),!1;var o=e.findNode(t.parentId);if(!o)return g("[addSibling] 当前节点 "+e.id+" 中无 "+t.parentId+" 节点，按理说不应出现这种异常状态，请检查树形结构合理性"),!1;var i=o.indexOfChild(t.id),a=parseInt(r)+i;return g("[addSibling] 计算插入位置："+i+" + "+r+"= "+a),o.addChild(n,+a),!0}}}),M=["schema","selectedId","expandedIds"],w=l.types.model("SchemaTreeModel",{schema:O,selectedId:l.types.optional(l.types.string,""),expandedIds:l.types.array(l.types.string)}).views(function(e){return{allAttibuteWithFilter:function(t){void 0===t&&(t=M);var n=[].concat(t||[]);return Object(u.pick)(e,n)}}}).actions(function(e){return{setSchema:function(t){e.schema=Object(l.cast)(t)},setExpandedIds:function(t){void 0===t&&(t=[]),e.expandedIds=t},setSelectedId:function(t){e.selectedId=t}}}).actions(function(e){return{updateAttribute:function(t,n){return A(e,t,n)}}}).actions(function(e){return{autoExpandIdIntoView:function(t){if(t){for(var n=t,r=[],o=e.expandedIds.slice();n;){var i=e.schema.findNode(n);n=i&&i.parentId,!~o.indexOf(n)&&n&&r.push(n)}h("[自动展开节点] expandedIds: "+o+", shouldExpand: "+r),e.setExpandedIds(o.concat(r))}},resetToEmptyTree:function(){var t=e.schema.toJSON();return e.setSchema(T()),t}}});!function(e){e.IDS="ids",e.CHILDREN="children",e.ID="id",e.NAME="name",e.PARENTID="parentId",e.SCREENID="screenId"}(p||(p={}));var k=Object.values(p);function x(e,t){var n;return void 0===e&&(e="unknown"),void 0===t&&(t=!1),"$"+(t?"uu_":"")+e+"_"+(void 0===n&&(n=5),Object(d.generateUUIDv4)().slice(0,n))}function C(e,t){if(!k.includes(e))return t}function E(e){return JSON.stringify(e,C)}function I(e){return void 0===e&&(e=ce.schema),e.children||(e.children=[]),Object(s.map)(e,function(e){var t=O.create({id:e.id||x(e.name,!0),screenId:e.screenId||x(e.name),name:e.name});return t.setAttrs(e),t},!0,function(e,t){e.setChildren(t)})}function T(){return I()}function B(e){void 0===e&&(e=ce);var t=Object.assign({},ce,e),n=t.schema,r=t.selectedId,o=t.expandedIds;return w.create({schema:n,selectedId:r,expandedIds:o})}function z(){return B()}function W(e,t){var n=[].concat(t||[]);return Object(s.traverse)(e,function(e,t){return void 0===t&&(t=[]),t.push(n.length?Object(u.pick)(e,n):e),t})}function j(e,t,n){if(!t)return null;var r=null,o=[].concat(n||[]);return Object(s.traverse)(e,function(e){return e.id===t&&(r=o.length?Object(u.pick)(e,o):e,!0)},s.TRAVERSE_TYPE.BFS,!0),r}var F,P=function(e){Object(u.invariant)(!!e,"[getIdRegex] 传入的 id 值不存在，请 check 数据格式");var t=e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");return y("[getIdRegex] id: "+e+" --esc--\x3e "+t+" 转换后的正则表达式 "+RegExp(t)),new RegExp(t)},R=Object(c.updateInScope)(["name","screenId","attrs"]),A=Object(c.updateInScope)(["schema","selectedId","expandedIds"]),N=Object(c.updateInScope)(["schemaTree"]),L=n(9),_=n.n(L),D=n(4),q=n.n(D);function G(e,t){return e&&e.trim().split(",")||t}!function(e){e.CLONED="CLONED"}(F||(F={}));var V=new Map;function U(e,t,n){void 0===n&&(n=!1);var r=V.get(e.id);if(r){var o=r.nodes.get(t);return n?o.clone():o}}var H=new q.a;H.get("getAllNodes","/nodes",function(e){var t=e.stores,n=e.request.query,r=G(n&&n.filter,S);e.response.body={nodes:t.model.schema.allNodesWithFilter(r)},e.response.status=200}),H.get("getNodeById","/nodes/:id",function(e){var t=e.stores,n=e.request.query,r=e.params.id,o=G(n&&n.filter,S);e.response.body={node:j(t.model.schema,r,o)},e.response.status=200}),H.get("getNodeParentById","/nodes/:id/parent",function(e){var t=e.stores,n=e.request.query,r=e.params.id,o=j(t.model.schema,r,["parentId"]),i=o&&o.parentId;b("[api - getNodeParentById] 找到 parentId: "+i);var a,s="";if(i){var u=G(n&&n.filter,S);a=j(t.model.schema,i,u),s="父节点 id 为 "+i}else s="当前节点无父节点";Object(c.buildNormalResponse)(e,200,a?{node:a}:{},s)}),H.get("getCloneNode","/buffers/clone",function(e){var t=e.stores,n=e.request.query,r=G(n&&n.filter,S),o=U(t,F.CLONED),i="";i=o?"获取成功. clone 节点 id: "+o.id:"当前缓存区中无 clone 类型节点，问题定位源 `getBufferNode`",Object(c.buildNormalResponse)(e,200,{node:o&&Object(u.pick)(o,r)},i)}),H.get("getSelection","/selection",function(e){var t=e.stores;Object(c.buildNormalResponse)(e,200,{id:t.model.selectedId})});var J=new q.a;J.post("createNewTree","/tree",function(e){var t=e.stores,n=e.request.data.schema;t.setModel({schema:n});var r=W(n,"id").map(function(e){return e.id});t.model.setExpandedIds(r),e.response.status=200,Object(c.buildNormalResponse)(e,200,{ids:r},"创建成功")}),J.post("addChildNode","/nodes/:id/children",function(e){var t,n,r=e.stores,o=e.request.data,i=o.schema,a=o.targetIndex,s=o.useBuffer,u=o.useClone,l=void 0===u||u,d=e.params.id;if(d){var f=s?U(r,F.CLONED,l):I(i),p=j(r.model.schema,d);s&&!f?t="添加失败，缓存区不存在 clone 类型节点":p?j(r.model.schema,f.id)?t="要插入的节点(id:"+f.id+")已存在":(p.addChild(f,a),n=f.schemaJSON):t="id 为 "+d+" 的节点不存在"}else t="传入节点 id 不能为空";Object(c.buildNormalResponse)(e,200,n?{node:n,useBuffer:s}:0,t)}),J.post("addSiblingNode","/nodes/:id/sibling",function(e){var t,n,r=e.stores,o=e.request.data,i=o.schema,a=o.offset,s=e.params.id;if(s){var u=I(i),l=j(r.model.schema,s);l?j(r.model.schema,u.id)?t="要插入的节点(id:"+u.id+")已存在":r.model.schema.addSibling(l,u,a)?n=u.schemaJSON:t="插入节点失败，请打开控制台查看 [addSibling] 部分的日志":t="id 为 "+s+" 的节点不存在"}else t="传入节点 id 不能为空";Object(c.buildNormalResponse)(e,200,n?{node:n}:null,t)}),J.post("cloneNodeIntoBuffer","/nodes/:id/clone",function(e){var t=e.stores,n=e.params.id,r=t.model.schema.cloneFromSubId(n),o=r.origin,i=r.target,a="";i?(a="拷贝成功，新节点 id: "+i.id,function(e,t,n){var r=V.get(e.id),o=r&&r.nodes||new Map;o.set(t,n),V.set(e.id,{stores:e,nodes:o})}(t,F.CLONED,i)):a="拷贝失败，问题定位源 `cloneFromSubId`",Object(c.buildNormalResponse)(e,200,{origin:o&&Object(u.pick)(o,S),target:i&&Object(u.pick)(i,S)},a)});var Y=new q.a;Y.put("updateRoot","/tree/root",function(e){var t=e.stores,n=e.request.data,r=n.name,o=n.value,i=t.model.schema.updateAttribute(r,o);e.response.body={success:i},e.response.status=200}),Y.put("updateNodeById","/nodes/:id",function(e){var t=e.stores,n=e.request.data,r=n.name,o=n.value,i=e.params.id,a=t.model.schema.updateAttributeById(i,r,o);e.response.body={success:a},e.response.status=200}),Y.put("updateSelection","/selection/:id",function(e){var t=e.stores,n=e.params.id;t.model.setSelectedId(n),t.model.autoExpandIdIntoView(n),e.response.status=200});var K=new q.a;K.del("delTree","/tree",function(e){var t=e.stores;e.response.body={node:t.resetToEmpty()},e.response.status=200}),K.del("delNode","/nodes/:id",function(e){var t=e.stores,n=e.params.id,r=n===t.model.schema.id?t.resetToEmpty():t.model.schema.removeNode(n),o="节点 "+n+" 删除成功";Object(c.buildNormalResponse)(e,200,{node:r},o)});var X,$=function(e,t){var n=this;void 0===t&&(t={});var r=new _.a({domain:"ide-tree"});return r.innerApps=t,r.use(function(r,o){return function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}(n,void 0,void 0,function(){var n;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(i){switch(i.label){case 0:return r.stores=e,r.innerApps=t,n=r.request.url,b("["+e.id+"] request: "+JSON.stringify(r.request.toJSON())),[4,o()];case 1:return i.sent(),b("["+e.id+"] ["+r.request.method+"] "+n+" ==> response: "+JSON.stringify(r.response.toJSON())),[2]}})})}),r.use(H.routes()),r.use(J.routes()),r.use(Y.routes()),r.use(K.routes()),r},Q=function(){return(Q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Z="sst_";X||(X={});var ee={},te=l.types.model("StoresModel",{id:l.types.refinement(l.types.identifier,function(e){return 0===e.indexOf(Z)}),model:w}).actions(function(e){return{setModel:function(t){e.model=Object(l.cast)(t)}}}).actions(function(e){return{updateAttribute:function(t,n){N(e,t,n)}}}).actions(function(e){return{resetToEmpty:function(){return e.model.resetToEmptyTree()}}}),ne=1;function re(){var e=Object(c.getSubAppsFromFactoryMap)(ee),t=e.subStores,n=e.subApps,r=e.subClients;return{stores:te.create(Q({id:""+Z+ne++,model:z()},t),{clients:r}),innerApps:n}}var oe=function(e){return function(t,n){e.stores.model.setExpandedIds(t)}},ie=function(e){return function(t){e.stores.model.setSelectedId(t.id)}},ae=function(){return(ae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},se=i.Tree.TreeNode,ue={name:"[init comp]",id:"-1",screenId:"-1"},ce={schema:ue,selectedId:"",expandedIds:[]},le=function(e){var t=function(e){var t=e.schema,n=e.selectedId,a=e.expandedIds,u=void 0===a?[]:a,c=e.onExpand,l=e.onSelectNode,d=e.onRightClickNode,f=u.slice(),p=Object(r.useCallback)(function(e,n){var r=e&&e[0];if(r&&l){var o=j(t,r);l&&l(o)}},[l,t]),m=Object(r.useCallback)(function(e){var n=e.node,r=e.event,o=n.props.eventKey,i=r.clientX,a=r.clientY;if(o&&d){var s=j(t,o);d({event:{clientX:i,clientY:a},node:s})}},[t,d]);return o.a.createElement(i.Tree,{key:"SchemaTree",showLine:!0,defaultExpandAll:!0,autoExpandParent:!1,onExpand:c,expandedKeys:f,selectedKeys:[n],onSelect:p,onRightClick:m},function(e){for(var t={},n=0,r=Object(s.traverse)(e,function(e,r){void 0===r&&(r=[]);var i=e.name,a=e.id,s=e.parentId;return r.push({id:a,name:i,component:o.a.createElement(se,{title:i,key:a}),parentId:s}),t[a]=n,n++,r}),i=n;i>0;i--){var a=r[i-1];if(a&&a.parentId){var u=r[t[a.parentId]],c=u.component,l=u.name,d=u.id,f=c.props.children,p=[a.component].concat(f||[]);u.component=o.a.createElement(se,{title:l,key:d},p)}}return r[0].component}(t))};return t.displayName="SchemaTreeHOC",Object(a.observer)(Object(c.based)(Object(a.observer)(t),ce))},de=le(),fe=function(e){var t=e.stores,n=le(),r=function(r){var i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n}(r,[]),a=t.model,s=Object(u.pick)(a,M);v("["+t.id+"] rendering");var l=Object(c.useInjectedEvents)(e,i,{onExpand:[oe],onSelectNode:[ie]});return Object(c.addModelChangeListener)(a,M,l.onModelChange),o.a.createElement(n,ae({},s,l))};return r.displayName="SchemaTreeWithStore",Object(a.observer)(r)},pe=function(){var e=re(),t=e.stores,n=e.innerApps,r=$(t,n);return{stores:t,app:r,client:r.client,innerApps:n}},me=function(){var e=pe();return ae({},e,{SchemaTreeWithStore:fe(e)})};n.d(t,"EMPTY_SCHEMA_ID",function(){return"-1"}),n.d(t,"EMPTY_SCHEMA",function(){return ue}),n.d(t,"FLAG_ROOT",function(){return"@root"}),n.d(t,"DEFAULT_PROPS",function(){return ce}),n.d(t,"SchemaTreeHOC",function(){return le}),n.d(t,"SchemaTree",function(){return de}),n.d(t,"SchemaTreeAddStore",function(){return fe}),n.d(t,"SchemaTreeStoresEnv",function(){return pe}),n.d(t,"SchemaTreeFactory",function(){return me}),n.d(t,"SCHEMA_CONTROLLED_KEYS",function(){return S}),n.d(t,"SchemaModel",function(){return O}),n.d(t,"CONTROLLED_KEYS",function(){return M}),n.d(t,"SchemaTreeModel",function(){return w}),n.d(t,"SPECIAL_ATTRIBUTE_NAME",function(){return p}),n.d(t,"SPECIAL_NAMES",function(){return k}),n.d(t,"genCompIdByName",function(){return x}),n.d(t,"stringifyAttribute",function(){return E}),n.d(t,"createSchemaModel",function(){return I}),n.d(t,"createEmptySchema",function(){return T}),n.d(t,"createSchemaTreeModel",function(){return B}),n.d(t,"createEmptySchemaTreeModel",function(){return z}),n.d(t,"getAllNodes",function(){return W}),n.d(t,"findById",function(){return j}),n.d(t,"getIdRegex",function(){return P}),n.d(t,"updateSchema",function(){return R}),n.d(t,"updateSchemaTree",function(){return A}),n.d(t,"updateStoresAttribute",function(){return N}),n.d(t,"STORE_ID_PREIX",function(){return Z}),n.d(t,"ESubApps",function(){return X}),n.d(t,"FACTORY_SUBAPP",function(){return ee}),n.d(t,"Stores",function(){return te}),n.d(t,"StoresFactory",function(){return re}),n.d(t,"AppFactory",function(){return $})}]))},167:function(e,t,n){var r,o,i,a,s,u,c,l,d,f,p;window,e.exports=(r=n(138),o=n(0),i=n(137),a=n(139),s=n(136),u=n(143),c=n(140),l=n(142),d=n(141),f=n(135),p=n(144),function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=20)}([function(e,t,n){e.exports=n(15)()},function(e,t){e.exports=r},function(e,t){e.exports=o},function(e,t){e.exports=i},function(e,t){e.exports=a},function(e,t){e.exports=s},function(e,t,n){var r=n(17),o=n(0);e.exports=function(e,t,n){var o=e[t];if(o){var i=[];if(Object.keys(o).forEach(function(e){-1===r.indexOf(e)&&i.push(e)}),i.length)throw new Error("Prop "+t+" passed to "+n+". Has invalid keys "+i.join(", "))}},e.exports.isRequired=function(t,n,r){if(!t[n])throw new Error("Prop "+n+" passed to "+r+" is required");return e.exports(t,n,r)},e.exports.supportingArrays=o.oneOfType([o.arrayOf(e.exports),e.exports])},function(e,t){e.exports=u},function(e,t){e.exports=c},function(e,t,n){var r,o,i,a,s,u,c,l,d,f;window,e.exports=(r=n(1),o=n(5),i=n(3),a=n(2),s=n(4),u=n(13),c=n(8),l=n(7),d=n(12),f=n(18),function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t){e.exports=r},function(e,t){e.exports=o},function(e,t){e.exports=i},function(e,t){e.exports=a},function(e,t){e.exports=s},function(e,t){e.exports=u},function(e,t){e.exports=c},function(e,t){e.exports=l},function(e,t,n){var r,o,i,a,s,u,c,l,d;window,e.exports=(r=n(2),o=n(1),i=n(0),a=n(11),s=n(4),u=n(3),c=n(5),l=n(6),d=n(10),function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t){e.exports=r},function(e,t){e.exports=o},function(e,t){e.exports=i},function(e,t){e.exports=a},function(e,t){e.exports=s},function(e,t){e.exports=u},function(e,t){e.exports=c},function(e,t){e.exports=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10);function o(e){for(var t="",n=0;n<e.length;n++)t+=e[n].toString(16).padStart(2,"0");return t}t.generateUUIDv4=function(){var e=r.getRandomBytes(16);return e[6]=15&e[6]|64,e[8]=191&e[8]|128,o(e.subarray(0,4))+"-"+o(e.subarray(4,6))+"-"+o(e.subarray(6,8))+"-"+o(e.subarray(8,10))+"-"+o(e.subarray(10,16))}},function(e,t){e.exports=d},function(e,t,n){"use strict";function r(e){for(var t=Math.pow(2,8*e.byteLength/e.length),n=0;n<e.length;n++)e[n]=Math.random()*t}Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomValuesWithMathRandom=r,t.getRandomValues="undefined"!=typeof crypto?crypto.getRandomValues.bind(crypto):"undefined"!=typeof msCrypto?msCrypto.getRandomValues.bind(msCrypto):r,t.getRandomBytes=function(e){var n=new Uint8Array(e);return t.getRandomValues(n),n}},function(e,t,n){"use strict";n.r(t);var r=n(5),o=n.n(r),i=n(6),a=n(7),s=n(3),u=n(1),c=n(0),l=n(8);function d(e,t){return parseFloat(t)-parseFloat(e)}var f,p=Object(u.createDebuggers)("ide-tree"),m=(p.debugBase,p.debugComp,p.debugError,p.debugIO),b=p.debugInteract,h=p.debugMini,y=p.debugModel,g=p.debugRender,v=["screenId","name","id","attrs","children"],S=c.types.model("SchemaModel",{id:c.types.string,screenId:c.types.optional(c.types.string,"_unset"),name:c.types.optional(c.types.string,""),attrs:c.types.optional(c.types.string,"{}"),parentId:c.types.optional(c.types.string,""),children:c.types.array(c.types.late(function(){return S}))}).views(function(e){return{get attrsJSON(){return JSON.parse(e.attrs)},get childrenIds(){return(e.children||[]).map(function(e){return e.id})},get schemaJSON(){return Object(s.map)(e,function(e){return Object.assign({},e.attrsJSON,{id:e.id,screenId:e.screenId,name:e.name})},!0)},get allNodes(){return W(e)},get isRoot(){return!!e.parentId}}}).actions(function(e){return{setParentId:function(t){Object(u.invariant)(!!t,"不能将 id 设置成空"),e.parentId=t},setChildren:function(t){t.forEach(function(t){t.setParentId(e.id)}),e.children=t||[]},setId:function(t){Object(u.invariant)(!!t,"将要更改的 id 为空"),e.id=t},setScreenId:function(t){Object(u.invariant)(!!t,"目标 screenId 不应该为空");var n=Object(s.traverse)(e,function(e){return e.screenId==t},s.TRAVERSE_TYPE.BFS,!0);Object(u.invariant)(!n,"修改不生效，因为目标 screenId 已存在"),e.screenId=t},setName:function(t){Object(u.invariant)(!!t,"不能将 name 更改为空值"),e.name=t},setAttrs:function(t){e.attrs=E(t)}}}).views(function(e){return{findNode:function(t,n){return y("[findNode] 开始查找节点 "+t+", filterArray: "+n),j(e,t,n)},indexOfChild:function(e){return e?(this.children||[]).map(function(e){return e.id}).indexOf(e):-1},allNodesWithFilter:function(t){void 0===t&&(t=v);var n=[].concat(t||[]);return e.allNodes.map(function(e){return Object(u.pick)(e,n)})},clone:function(){var t=Object(s.map)(e,function(e){var t=P(e.screenId),n=x(e.name),r=x(e.name,!0),o=JSON.stringify(e.attrsJSON).replace(t,n);return S.create({name:e.name,attrs:o,id:r,screenId:n})},!0,function(e,t){e.setChildren(t)});return y("[clone] 将节点 "+e.id+" 拷贝成新节点 "+t.id+", 生成的节点对象：%o",t),t}}}).actions(function(e){return{updateAttribute:function(t,n){return R(e,t,n)},updateAttributeById:function(t,n,r){if(!t)return!1;var o=e.findNode(t);return!!o&&R(o,n,r)},addChildren:function(t){[].concat(t).forEach(function(t){t.setParentId(e.id),e.children.push(t)})}}}).actions(function(e){return{removeNode:function(t){if(!t)return!1;var n=e.findNode(t);if(n){var r=n.toJSON();return Object(c.destroy)(n),r}return!1}}}).actions(function(e){return{cloneFromSubId:function(t){var n=e.findNode(t);return y("[cloneFromSubId] 拷贝生成的节点 id "+(n&&n.id)),{origin:n,target:n&&n.clone()}}}}).actions(function(e){return{addChild:function(t,n){var r=e.children.length;if(r){var o=Object(u.isExist)(n)?+n:r;t.setParentId(e.id),e.children.splice(o,0,t)}else e.addChildren(t)}}}).actions(function(e){return{removeChildren:function(t){var n=[].concat(t);y("[comp] 删除前 children 长度: "+e.children.length+", 待删除的 ids: "+n.join("、"));var r=[].concat(e.childrenIds),o=n.map(function(e){return r.indexOf(e)});o.sort(d),o.forEach(function(t){if(-1!==t){var n=e.children[t];Object(c.destroy)(n)}}),y("[comp] 删除后 children 长度: "+e.children.length+"，ids: "+e.children.map(function(e){return e.id}).join("、"))}}}).actions(function(e){return{addSibling:function(t,n,r){if(void 0===r&&(r=0),!Object(u.isExist)(t.parentId))return y("[addSibling] 节点 "+t.id+" 无父元素，无法进行新增兄弟节点的操作"),!1;var o=e.findNode(t.parentId);if(!o)return y("[addSibling] 当前节点 "+e.id+" 中无 "+t.parentId+" 节点，按理说不应出现这种异常状态，请检查树形结构合理性"),!1;var i=o.indexOfChild(t.id),a=parseInt(r)+i;return y("[addSibling] 计算插入位置："+i+" + "+r+"= "+a),o.addChild(n,+a),!0}}}),O=["schema","selectedId","expandedIds"],M=c.types.model("SchemaTreeModel",{schema:S,selectedId:c.types.optional(c.types.string,""),expandedIds:c.types.array(c.types.string)}).views(function(e){return{allAttibuteWithFilter:function(t){void 0===t&&(t=O);var n=[].concat(t||[]);return Object(u.pick)(e,n)}}}).actions(function(e){return{setSchema:function(t){e.schema=Object(c.cast)(t)},setExpandedIds:function(t){void 0===t&&(t=[]),e.expandedIds=t},setSelectedId:function(t){e.selectedId=t}}}).actions(function(e){return{updateAttribute:function(t,n){return A(e,t,n)}}}).actions(function(e){return{autoExpandIdIntoView:function(t){if(t){for(var n=t,r=[],o=e.expandedIds.slice();n;){var i=e.schema.findNode(n);n=i&&i.parentId,!~o.indexOf(n)&&n&&r.push(n)}b("[自动展开节点] expandedIds: "+o+", shouldExpand: "+r),e.setExpandedIds(o.concat(r))}},resetToEmptyTree:function(){var t=e.schema.toJSON();return e.setSchema(T()),t}}}),w=n(2);!function(e){e.IDS="ids",e.CHILDREN="children",e.ID="id",e.NAME="name",e.PARENTID="parentId",e.SCREENID="screenId"}(f||(f={}));var k=Object.values(f);function x(e,t){var n;return void 0===e&&(e="unknown"),void 0===t&&(t=!1),"$"+(t?"uu_":"")+e+"_"+(void 0===n&&(n=5),Object(l.generateUUIDv4)().slice(0,n))}function C(e,t){if(!k.includes(e))return t}function E(e){return JSON.stringify(e,C)}function I(e){return void 0===e&&(e=oe.schema),e.children||(e.children=[]),Object(s.map)(e,function(e){var t=S.create({id:e.id||x(e.name,!0),screenId:e.screenId||x(e.name),name:e.name,attrs:"{}",parentId:"",children:[]});return t.setAttrs(e),t},!0,function(e,t){e.setChildren(t)})}function T(){return I()}function B(e){void 0===e&&(e=oe);var t=Object.assign({},oe,e),n=t.schema,r=t.selectedId,o=t.expandedIds;return M.create({schema:n,selectedId:r,expandedIds:o})}function z(){return B()}function W(e,t){var n=[].concat(t||[]);return Object(s.traverse)(e,function(e,t){return void 0===t&&(t=[]),t.push(n.length?Object(u.pick)(e,n):e),t})}function j(e,t,n){if(!t)return null;var r=null,o=[].concat(n||[]);return Object(s.traverse)(e,function(e){return e.id===t&&(r=o.length?Object(u.pick)(e,o):e,!0)},s.TRAVERSE_TYPE.BFS,!0),r}var F,P=function(e){Object(u.invariant)(!!e,"[getIdRegex] 传入的 id 值不存在，请 check 数据格式");var t=e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");return h("[getIdRegex] id: "+e+" --esc--\x3e "+t+" 转换后的正则表达式 "+RegExp(t)),new RegExp(t)},R=Object(w.updateInScope)(["name","screenId","attrs"]),A=Object(w.updateInScope)(["schema","selectedId","expandedIds"]),N=Object(w.updateInScope)(["schemaTree"]),L=n(9),_=n.n(L),D=n(4),q=n.n(D);function G(e,t){return e&&e.trim().split(",")||t}!function(e){e.CLONED="CLONED"}(F||(F={}));var V=new Map;function U(e,t,n){void 0===n&&(n=!1);var r=V.get(e.id);if(r){var o=r.nodes.get(t);return n?o.clone():o}}var H=new q.a;H.get("getAllNodes","/nodes",function(e){var t=e.stores,n=e.request.query,r=G(n&&n.filter,v);e.response.body={nodes:t.model.schema.allNodesWithFilter(r)},e.response.status=200}),H.get("getNodeById","/nodes/:id",function(e){var t=e.stores,n=e.request.query,r=e.params.id,o=G(n&&n.filter,v);e.response.body={node:j(t.model.schema,r,o)},e.response.status=200}),H.get("getNodeParentById","/nodes/:id/parent",function(e){var t=e.stores,n=e.request.query,r=e.params.id,o=j(t.model.schema,r,["parentId"]),i=o&&o.parentId;m("[api - getNodeParentById] 找到 parentId: "+i);var a,s="";if(i){var u=G(n&&n.filter,v);a=j(t.model.schema,i,u),s="父节点 id 为 "+i}else s="当前节点无父节点";Object(w.buildNormalResponse)(e,200,a?{node:a}:{},s)}),H.get("getCloneNode","/buffers/clone",function(e){var t=e.stores,n=e.request.query,r=G(n&&n.filter,v),o=U(t,F.CLONED),i="";i=o?"获取成功. clone 节点 id: "+o.id:"当前缓存区中无 clone 类型节点，问题定位源 `getBufferNode`",Object(w.buildNormalResponse)(e,200,{node:o&&Object(u.pick)(o,r)},i)}),H.get("getSelection","/selection",function(e){var t=e.stores;Object(w.buildNormalResponse)(e,200,{id:t.model.selectedId})});var J=new q.a;J.post("createNewTree","/tree",function(e){var t=e.stores,n=e.request.data.schema;t.setModel({schema:n});var r=W(n,"id").map(function(e){return e.id});t.model.setExpandedIds(r),e.response.status=200,Object(w.buildNormalResponse)(e,200,{ids:r},"创建成功")}),J.post("addChildNode","/nodes/:id/children",function(e){var t,n,r=e.stores,o=e.request.data,i=o.schema,a=o.targetIndex,s=o.useBuffer,u=o.useClone,c=void 0===u||u,l=e.params.id;if(l){var d=s?U(r,F.CLONED,c):I(i),f=j(r.model.schema,l);s&&!d?t="添加失败，缓存区不存在 clone 类型节点":f?j(r.model.schema,d.id)?t="要插入的节点(id:"+d.id+")已存在":(f.addChild(d,a),n=d.schemaJSON):t="id 为 "+l+" 的节点不存在"}else t="传入节点 id 不能为空";Object(w.buildNormalResponse)(e,200,n?{node:n,useBuffer:s}:0,t)}),J.post("addSiblingNode","/nodes/:id/sibling",function(e){var t,n,r=e.stores,o=e.request.data,i=o.schema,a=o.offset,s=e.params.id;if(s){var u=I(i),c=j(r.model.schema,s);c?j(r.model.schema,u.id)?t="要插入的节点(id:"+u.id+")已存在":r.model.schema.addSibling(c,u,a)?n=u.schemaJSON:t="插入节点失败，请打开控制台查看 [addSibling] 部分的日志":t="id 为 "+s+" 的节点不存在"}else t="传入节点 id 不能为空";Object(w.buildNormalResponse)(e,200,n?{node:n}:null,t)}),J.post("cloneNodeIntoBuffer","/nodes/:id/clone",function(e){var t=e.stores,n=e.params.id,r=t.model.schema.cloneFromSubId(n),o=r.origin,i=r.target,a="";i?(a="拷贝成功，新节点 id: "+i.id,function(e,t,n){var r=V.get(e.id),o=r&&r.nodes||new Map;o.set(t,n),V.set(e.id,{stores:e,nodes:o})}(t,F.CLONED,i)):a="拷贝失败，问题定位源 `cloneFromSubId`",Object(w.buildNormalResponse)(e,200,{origin:o&&Object(u.pick)(o,v),target:i&&Object(u.pick)(i,v)},a)});var Y=new q.a;Y.put("updateRoot","/tree/root",function(e){var t=e.stores,n=e.request.data,r=n.name,o=n.value,i=t.model.schema.updateAttribute(r,o);e.response.body={success:i},e.response.status=200}),Y.put("updateNodeById","/nodes/:id",function(e){var t=e.stores,n=e.request.data,r=n.name,o=n.value,i=e.params.id,a=t.model.schema.updateAttributeById(i,r,o);e.response.body={success:a},e.response.status=200}),Y.put("updateSelection","/selection/:id",function(e){var t=e.stores,n=e.params.id;t.model.setSelectedId(n),t.model.autoExpandIdIntoView(n),e.response.status=200});var K=new q.a;K.del("delTree","/tree",function(e){var t=e.stores;e.response.body={node:t.resetToEmpty()},e.response.status=200}),K.del("delNode","/nodes/:id",function(e){var t=e.stores,n=e.params.id,r=n===t.model.schema.id?t.resetToEmpty():t.model.schema.removeNode(n),o="节点 "+n+" 删除成功";Object(w.buildNormalResponse)(e,200,{node:r},o)});var X=function(e){var t=new _.a({domain:"ide-tree"});return t.use(function(t,n){t.stores=e,m("["+e.id+"] request: "+JSON.stringify(t.request.toJSON())),n(),m("["+e.id+"] ["+t.request.method+"] "+t.request.url+" ==> response: "+JSON.stringify(t.response.toJSON()))}),t.use(H.routes()),t.use(J.routes()),t.use(Y.routes()),t.use(K.routes()),t},$="sst_",Q=c.types.model("StoresModel",{id:c.types.refinement(c.types.identifier,function(e){return 0===e.indexOf($)}),model:M}).actions(function(e){return{setModel:function(t){e.model=Object(c.cast)(t)}}}).actions(function(e){return{updateAttribute:function(t,n){N(e,t,n)}}}).actions(function(e){return{resetToEmpty:function(){return e.model.resetToEmptyTree()}}}),Z=1;function ee(){return Q.create({id:""+$+Z++,model:z()})}var te=function(){return(te=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ne=i.Tree.TreeNode,re={name:"[init comp]",id:"-1",screenId:"-1"},oe={schema:re,selectedId:"",expandedIds:[]},ie=function(e){var t=function(e){void 0===e&&(e=oe);var t=Object.assign({},oe,e),n=t.schema,r=t.selectedId,a=t.expandedIds,u=void 0===a?[]:a,c=t.onExpand,l=u.slice();return o.a.createElement(i.Tree,{key:"SchemaTree",showLine:!0,defaultExpandAll:!0,autoExpandParent:!1,onExpand:c,expandedKeys:l,selectedKeys:[r],onSelect:function(t,n){var r=e.onSelectNode,o=e.schema,i=t&&t[0];if(i&&r){var a=j(o,i);r&&r(a)}},onRightClick:function(t){var n=t.node,r=t.event,o=e.schema,i=e.onRightClickNode,a=n.props.eventKey,s=r.clientX,u=r.clientY;a&&i&&i({event:{clientX:s,clientY:u},node:j(o,a)})}},function(e){for(var t={},n=0,r=Object(s.traverse)(e,function(e,r){void 0===r&&(r=[]);var i=e.name,a=e.id,s=e.parentId;return r.push({id:a,name:i,component:o.a.createElement(ne,{title:i,key:a}),parentId:s}),t[a]=n,n++,r}),i=n;i>0;i--){var a=r[i-1];if(a&&a.parentId){var u=r[t[a.parentId]],c=u.component,l=u.name,d=u.id,f=c.props.children,p=[a.component].concat(f||[]);u.component=o.a.createElement(ne,{title:l,key:d},p)}}return r[0].component}(n))};return t.displayName="SchemaTreeHOC",Object(a.observer)(t)},ae=ie(),se=function(e,t){return function(n,r){e.model.setExpandedIds(n),t&&t(n,r)}},ue=function(e,t){return function(n){e.model.setSelectedId(n.id),t&&t(n)}},ce=function(e){var t=function(t){var n=t.onExpand,r=t.onSelectNode,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n}(t,["onExpand","onSelectNode"]),a=e.model,s=Object(u.pick)(a,O);return g("["+e.id+"] rendering"),o.a.createElement(ae,te({},s,{onExpand:se(e,n),onSelectNode:ue(e,r)},i))};return t.displayName="SchemaTreeWithStore",Object(a.observer)(t)},le=function(){var e=ee(),t=X(e);return{stores:e,app:t,client:t.client,SchemaTreeWithStore:ce(e)}};n.d(t,"EMPTY_SCHEMA_ID",function(){return"-1"}),n.d(t,"EMPTY_SCHEMA",function(){return re}),n.d(t,"FLAG_ROOT",function(){return"@root"}),n.d(t,"DEFAULT_PROPS",function(){return oe}),n.d(t,"SchemaTreeHOC",function(){return ie}),n.d(t,"SchemaTree",function(){return ae}),n.d(t,"SchemaTreeAddStore",function(){return ce}),n.d(t,"SchemaTreeFactory",function(){return le}),n.d(t,"SCHEMA_CONTROLLED_KEYS",function(){return v}),n.d(t,"SchemaModel",function(){return S}),n.d(t,"CONTROLLED_KEYS",function(){return O}),n.d(t,"SchemaTreeModel",function(){return M}),n.d(t,"SPECIAL_ATTRIBUTE_NAME",function(){return f}),n.d(t,"SPECIAL_NAMES",function(){return k}),n.d(t,"genCompIdByName",function(){return x}),n.d(t,"stringifyAttribute",function(){return E}),n.d(t,"createSchemaModel",function(){return I}),n.d(t,"createEmptySchema",function(){return T}),n.d(t,"createSchemaTreeModel",function(){return B}),n.d(t,"createEmptySchemaTreeModel",function(){return z}),n.d(t,"getAllNodes",function(){return W}),n.d(t,"findById",function(){return j}),n.d(t,"getIdRegex",function(){return P}),n.d(t,"updateSchema",function(){return R}),n.d(t,"updateSchemaTree",function(){return A}),n.d(t,"updateStoresAttribute",function(){return N}),n.d(t,"STORE_ID_PREIX",function(){return $}),n.d(t,"Stores",function(){return Q}),n.d(t,"StoresFactory",function(){return ee}),n.d(t,"AppFactory",function(){return X})}]))},function(e,t,n){var r,o,i,a,s,u,c;window,e.exports=(r=n(2),o=n(3),i=n(4),a=n(5),s=n(6),u=n(7),c=n(10),function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t){e.exports=r},function(e,t){e.exports=o},function(e,t){e.exports=i},function(e,t){e.exports=a},function(e,t){e.exports=s},function(e,t){e.exports=u},function(e,t){e.exports=c},function(e,t,n){(function(r){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(o=r))}),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(9)(t);const{formatters:o}=e.exports;o.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(8))},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,d=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):d=-1,c.length&&p())}function p(){if(!l){var e=s(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function b(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new m(e,t)),1!==c.length||l||s(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=b,o.addListener=b,o.once=b,o.off=b,o.removeListener=b,o.removeAllListeners=b,o.emit=b,o.prependListener=b,o.prependOnceListener=b,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){e.exports=function(e){function t(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let n;function a(...e){if(!a.enabled)return;const t=a,o=Number(new Date),i=o-(n||o);t.diff=i,t.prev=n,t.curr=o,n=o,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,o)=>{if("%%"===n)return n;s++;const i=r.formatters[o];if("function"==typeof i){const r=e[s];n=i.call(t,r),e.splice(s,1),s--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return a.namespace=e,a.enabled=r.enabled(e),a.useColors=r.useColors(),a.color=t(e),a.destroy=o,a.extend=i,"function"==typeof r.init&&r.init(a),r.instances.push(a),a}function o(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function a(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){const e=[...r.names.map(a),...r.skips.map(a).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(t=0;t<o;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(10),Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},function(e,t){var n=1e3,r=6e4,o=36e5,i=24*o;function a(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}e.exports=function(e,t){t=t||{};var s=typeof e;if("string"===s&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*i;case"hours":case"hour":case"hrs":case"hr":case"h":return a*o;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===s&&!1===isNaN(e))return t.long?function(e){var t=Math.abs(e);return t>=i?a(e,t,i,"day"):t>=o?a(e,t,o,"hour"):t>=r?a(e,t,r,"minute"):t>=n?a(e,t,n,"second"):e+" ms"}(e):function(e){var t=Math.abs(e);return t>=i?Math.round(e/i)+"d":t>=o?Math.round(e/o)+"h":t>=r?Math.round(e/r)+"m":t>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),i=n(4),a=n(3),s=n(0),u=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},c=n(7),l=(c("context-menu"),function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o="";[].concat(t).forEach(function(e){o+="["+e+"]"}),n[0]=o+n[0],c("context-menu:"+e).apply(void 0,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e}(n))}}),d=(l("mini","普通"),l("error","错误"),l("model","模型")),f=(l("comp","组件"),l("render","渲染时"),l("act","交互行为")),p=l("io","数据请求"),m=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};function b(e,t,n){if(!e)throw new Error("[ide-view] Invariant failed: "+t+(n?" in '"+n+"'":""))}function h(e){return null!=e}function y(e){return"true"===e||!0===e}function g(e,t){var n,r,o={};try{for(var i=m(t),a=i.next();!a.done;a=i.next()){var s=a.value;e[s]&&(o[s]=e[s])}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o}function v(e){b(!!e,"menu 对象不能为空"),b(!!e.name,"menu 对象缺少 `name` 属性");var t=T.create({id:e.id,name:e.name,children:[]});return[].concat(e.children||[]).forEach(function(e){var n=e.id,r=e.name,o=e.icon,i=e.type,a=e.disabled,s=e.shortcut;t.addMenuItems(E.create({id:n,name:r,icon:o,type:i,disabled:a,shortcut:s}))}),t}var S="EMPTY_EMNU";function O(){return v({id:S,name:S})}var M,w=function(e){return function(t,n,r){return b(!!t,"入参 item 必须存在"),e.includes(n)?(t["set"+((o=n)?o.charAt(0).toUpperCase()+o.slice(1):"")](r),!0):(d("[更新属性] 属性名 "+n+" 不属于可更新范围，无法更新成 "+r+" 值；（附:可更新属性列表："+e+"）"),!1);var o}},k=w(["name","type","disabled","icon","shortcut"]),x=w(["visible","width","left","top"]);!function(e){e.NORMAL="normal",e.SEPARATOR="separator"}(M||(M={}));var C=Object.values(M),E=s.types.model("MenuItemModel",{id:s.types.optional(s.types.string,""),name:s.types.optional(s.types.string,""),type:s.types.optional(s.types.enumeration("Type",C),M.NORMAL),disabled:s.types.optional(s.types.boolean,!1),icon:s.types.optional(s.types.string,""),shortcut:s.types.optional(s.types.string,"")}).views(function(e){return{get isDivider(){return this.type===M.SEPARATOR}}}).actions(function(e){return{setId:function(t){e.id=t},setName:function(t){e.name=t},setType:function(t){e.type=t},setDisabled:function(t){e.disabled=y(t)},setIcon:function(t){e.icon=t},setShortcut:function(t){e.shortcut=t}}}),I=["id","name","children"],T=s.types.model("MenuModel",{id:s.types.optional(s.types.string,""),name:s.types.optional(s.types.string,""),children:s.types.array(s.types.late(function(){return E}))}).views(function(e){return{allItemsWithFilter:function(t){if(!t)return e.children;var n=[].concat(t||[]);return e.children.map(function(e){return g(e,n)})},findItem:function(t,n){if(!t)return null;var r=null,o=[].concat(n||[]);return e.children.some(function(e){return e.id===t&&(r=o.length?g(e,o):e,!0)}),r}}}).actions(function(e){return{setDisabledByIds:function(t,n){t&&t.length&&e.children.forEach(function(e){~t.indexOf(e.id)&&e.setDisabled(n)})},addMenuItems:function(t){[].concat(t).forEach(function(t){e.children.push(t)})},updateItemById:function(t,n,r){b(h(t),"菜单项 id 不能为空"),b(h(n),"[属性更新] 入参 attrName 不能为空"),d("[menu][更新属性] 将更新 id: "+t+" 的属性 "+n+" 值为 "+r);var o=e.findItem(t);return!!o&&k(o,n,r)}}}).actions(function(e){return{removeItem:function(t){if(!t)return!1;var n=e.findItem(t);if(n){var r=n.toJSON();return Object(s.destroy)(n),r}return!1}}}),B="scm_",z=["menu","visible","width","left","top"],W=s.types.model("StoresModel",{id:s.types.refinement(s.types.identifier,function(e){return 0===e.indexOf(B)}),menu:T,selectedKey:s.types.optional(s.types.string,""),visible:!1,width:s.types.optional(s.types.number,200),left:s.types.optional(s.types.number,0),top:s.types.optional(s.types.number,0)}).actions(function(e){return{setVisible:function(t){e.visible=y(t)},setSelectedKey:function(t){void 0===t&&(t=""),e.selectedKey=t},setWidth:function(t){e.width=+t},setLeft:function(t){e.left=+t},setTop:function(t){e.top=+t},setMenu:function(t){e.menu=Object(s.cast)(t)}}}).actions(function(e){return{setPostion:function(t){if(t){var n=t.x,r=t.y;h(n)&&e.setLeft(n),h(r)&&e.setTop(r)}},updateAttribute:function(t,n){return b(h(name),"[属性更新] 入参 attrName 不能为空"),x(e,t,n)}}}).actions(function(e){return{resetToEmpty:function(){var t=e.menu.toJSON();return e.setMenu(O()),e.setVisible(!1),e.setPostion({x:0,y:0}),t}}}),j=1;function F(){return W.create({id:""+B+j++,menu:O(),visible:!1,left:0,top:0})}var P=n(6),R=n.n(P),A=n(2),N=n.n(A),L=new N.a;L.get("getAllItems","/items",function(e){var t=e.stores,n=e.request.query,r=n&&n.filter&&n.filter.trim().split(",");e.response.body={items:t.menu.allItemsWithFilter(r)},e.response.status=200}),L.get("getItemById","/items/:id",function(e){var t=e.stores,n=e.request.query,r=e.params.id,o=n&&n.filter&&n.filter.trim().split(",");e.response.body={item:t.menu.findItem(r,o)},e.response.status=200}),L.get("getSelectedKey","/selection",function(e){var t=e.stores;e.request,e.response.body={selection:t.selectedKey},e.response.status=200});var _=new Map;document.addEventListener("click",function(e){var t,n,r=e.clientX,o=e.clientY;if(_.size)try{for(var i=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(_.values()),a=i.next();!a.done;a=i.next()){var s=a.value,u=s.stores,c=s.area,l=c.x,d=c.y,p=c.w,m=c.h;f("准备隐藏 id 为："+u.id+" 的右键菜单;");var b=!(r>l&&r<l+p&&o>d&&o<d+m);u.visible&&b&&(u.setVisible(!1),_.delete(u.id),f("已隐藏 id 为："+u.id+" 的右键菜单;"))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}});var D=new N.a;D.post("menu","/menu",function(e){var t=e.stores,n=e.request.data.menu;t.setMenu(n),e.response.status=200}),D.post("menu","/menu/bufferAreas",function(e){var t=e.stores,n=e.request.data.area;_.set(t.id,{stores:t,area:n}),e.response.status=200});var q=function(){return(q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},G=new N.a;G.put("items","/items",function(e){var t=e.stores;e.response.body={node:t.resetToEmpty()},e.response.status=200}),G.put("items","/items/:id",function(e){var t=e.stores,n=e.request.data,r=n.name,o=n.value,i=e.params.id,a=t.menu.updateItemById(i,r,o);e.response.body={success:a},e.response.status=200}),G.put("menu","/menu",function(e){var t=e.stores,n=e.request.data,r=n.name,o=n.value,i=t.updateAttribute(r,o);e.response.body={success:i},e.response.status=200}),G.put("menu","/menu/position",function(e){return function(e,t,n,r){return new(n||(n=Promise))(function(t,o){function i(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(i,a)}s((r=r.apply(e,[])).next())})}(this,0,void 0,function(){var t,n,r,o,i,a,s,u;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(c){if(t=e.stores,n=e.request,r=n.query,o=n.data,i=o.x,a=o.y,r)switch(r.type){case"event":s=t.menu.children.length,u=function(e,t,n){void 0===n&&(n=10);var r=e.x,o=e.y,i=t.w,a=t.h,s=window.innerWidth,u=window.innerHeight,c=s-r>i,l=u-o>a,d={x:0,y:0};return d.x=c?r+n:r-i-n,d.y=l?o+a>u?u-a:o+n:o-a,f("事件位置（"+r+", "+o+"）\n当前屏幕尺寸（"+s+", "+u+"）\n 菜单尺寸（"+i+", "+a+"）\n计算方位 right: "+c+",bottom: "+l+" \n 计算结果坐标{x:"+d.x+" ,y:"+d.y+"}"),d}({x:i,y:a},{w:t.width,h:48*s}),t.setPostion(u),e.response.body={success:!0,area:q({},u,{w:t.width,h:48*s})},e.response.status=200}return[2]})})});var V=new N.a;V.del("menu","/menu",function(e){var t=e.stores;e.response.body={menu:t.resetToEmpty()},e.response.status=200}),V.del("items","/items/:id",function(e){var t=e.stores,n=e.params.id,r=t.menu.removeItem(n);e.response.body={item:r},e.response.status=200}),V.del("menu","/menu/bufferAreas",function(e){var t=e.stores;e.response.body={result:_.delete(t.id)},e.response.status=200});var U,H,J,Y=function(e){var t=this,n=new R.a({domain:"context-menu"});return n.use(function(n,r){return function(e,t,n,r){return new(n||(n=Promise))(function(t,o){function i(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(i,a)}s((r=r.apply(e,[])).next())})}(t,0,void 0,function(){var t;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(o){switch(o.label){case 0:return n.stores=e,t=n.request.url,p("["+e.id+"] request: "+JSON.stringify(n.request.toJSON())),[4,r()];case 1:return o.sent(),p("["+e.id+"] ["+n.request.method+"] "+t+" ==> response: "+JSON.stringify(n.response.toJSON())),[2]}})})}),n.use(L.routes()),n.use(D.routes()),n.use(G.routes()),n.use(V.routes()),n},K=n(5),X=n.n(K),$=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Q=a.Menu.Item,Z=X.a.div.attrs({style:function(e){return e.style||{}}})(U||(U=$(["\n  display: ",";\n  position: fixed;\n  left: ","px;\n  top: ","px;\n  background: white;\n  box-shadow: 0px 2px 10px #999999;\n  z-index: 9;\n"],["\n  display: ",";\n  position: fixed;\n  left: ","px;\n  top: ","px;\n  background: white;\n  box-shadow: 0px 2px 10px #999999;\n  z-index: 9;\n"])),function(e){return e.visible?"block":"none"},function(e){return e.left||0},function(e){return e.top||0}),ee=X()(a.Menu)(H||(H=$(["\n  width: ","px;\n"],["\n  width: ","px;\n"])),function(e){return e.width||200}),te=X()(Q)(J||(J=$(["\n  .menuWrap & {\n    display: flex;\n    min-width: 160px;\n    justify-content: space-between;\n  }\n"],["\n  .menuWrap & {\n    display: flex;\n    min-width: 160px;\n    justify-content: space-between;\n  }\n"]))),ne=function(){return(ne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},re=Object(i.observer)(function(e){var t=e.menu,n=e.width,r=t.children,i=void 0===r?[]:r;return o.a.createElement(ee,{width:n,className:"menuWrap",onClick:function(t){var n=e.onClickItem,r=t.item,o=t.key,i=t.keyPath;f("[点击菜单]key: "+o+"; keyPath: "+i+"; item:",r),n&&n(o,i,r)},mode:"vertical"},i.slice().map(function(e,t){return e.isDivider||e.type===M.SEPARATOR?o.a.createElement(a.Menu.Divider,{key:e.id+t}):o.a.createElement(te,{className:"menuItem",disabled:e.disabled,key:e.id},o.a.createElement("div",{className:"content"},e.icon?o.a.createElement(a.Icon,{type:e.icon}):null,o.a.createElement("span",null,e.name)),e.shortcut?o.a.createElement("span",{className:"shortcut"},e.shortcut):null)}))});re.displayName="MenuSubject";var oe={menu:{id:"root",name:"empty menu"},visible:!1,left:0,top:0},ie=function(e){var t=function(e){void 0===e&&(e=oe);var t=Object.assign({},oe,e),n=t.menu,r=t.visible,i=t.width,a=t.left,s=t.top,u=t.onClickItem;return o.a.createElement(Z,{visible:r,left:a,top:s,className:"context-menu-container"},o.a.createElement(re,{width:i,menu:n,onClickItem:u}))};return t.displayName="ContextMenuHOC",Object(i.observer)(t)},ae=ie(),se=function(e,t){return function(n,r,o){e.setSelectedKey(n),t&&t(n,r,o)}},ue=function(e){var t=function(t){var n=t.onClickItem,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n}(t,["onClickItem"]),i=g(e,z);return o.a.createElement(ae,ne({},i,r,{onClickItem:se(e,n)}))};return t.displayName="ContextMenuWithStore",Object(i.observer)(t)},ce=function(){var e=F(),t=Y(e);return{stores:e,app:t,client:t.client,ContextMenuWithStore:ue(e)}};n.d(t,"DEFAULT_PROPS",function(){return oe}),n.d(t,"ContextMenuHOC",function(){return ie}),n.d(t,"ContextMenu",function(){return ae}),n.d(t,"ContextMenuAddStore",function(){return ue}),n.d(t,"ContextMenuFactory",function(){return ce}),n.d(t,"EMenuItemType",function(){return M}),n.d(t,"MENU_TYPES",function(){return C}),n.d(t,"MenuItemModel",function(){return E}),n.d(t,"CONTROLLED_KEYS",function(){return I}),n.d(t,"MenuModel",function(){return T}),n.d(t,"createMenuModel",function(){return v}),n.d(t,"createEmptyMenuModel",function(){return O}),n.d(t,"updateItem",function(){return k}),n.d(t,"updateMenuContainer",function(){return x}),n.d(t,"STORE_ID_PREIX",function(){return B}),n.d(t,"STORES_CONTROLLED_KEYS",function(){return z}),n.d(t,"Stores",function(){return W}),n.d(t,"StoresFactory",function(){return F}),n.d(t,"AppFactory",function(){return Y})}]))},function(e,t){e.exports=d},function(e,t){e.exports=f},function(e,t,n){"use strict";let{useState:r,useEffect:o}=n(3);function i(){return{innerHeight:window.innerHeight,innerWidth:window.innerWidth,outerHeight:window.outerHeight,outerWidth:window.outerWidth}}e.exports=function(){let[e,t]=r(i());function n(){t(i())}return o(()=>(window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}),[]),e}},function(e,t,n){var r,o,i,a,s,u,c;window,e.exports=(r=n(2),o=n(3),i=n(7),a=n(4),s=n(5),u=n(6),c=n(10),function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t){e.exports=r},function(e,t){e.exports=o},function(e,t){e.exports=i},function(e,t){e.exports=a},function(e,t){e.exports=s},function(e,t){e.exports=u},function(e,t){e.exports=c},function(e,t,n){(function(r){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(o=r))}),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(9)(t);const{formatters:o}=e.exports;o.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(8))},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,d=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):d=-1,c.length&&p())}function p(){if(!l){var e=s(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function b(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new m(e,t)),1!==c.length||l||s(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=b,o.addListener=b,o.once=b,o.off=b,o.removeListener=b,o.removeAllListeners=b,o.emit=b,o.prependListener=b,o.prependOnceListener=b,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){e.exports=function(e){function t(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let n;function a(...e){if(!a.enabled)return;const t=a,o=Number(new Date),i=o-(n||o);t.diff=i,t.prev=n,t.curr=o,n=o,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,o)=>{if("%%"===n)return n;s++;const i=r.formatters[o];if("function"==typeof i){const r=e[s];n=i.call(t,r),e.splice(s,1),s--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return a.namespace=e,a.enabled=r.enabled(e),a.useColors=r.useColors(),a.color=t(e),a.destroy=o,a.extend=i,"function"==typeof r.init&&r.init(a),r.instances.push(a),a}function o(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function a(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){const e=[...r.names.map(a),...r.skips.map(a).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(t=0;t<o;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(10),Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},function(e,t){var n=1e3,r=6e4,o=36e5,i=24*o;function a(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}e.exports=function(e,t){t=t||{};var s=typeof e;if("string"===s&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*i;case"hours":case"hour":case"hrs":case"hr":case"h":return a*o;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===s&&!1===isNaN(e))return t.long?function(e){var t=Math.abs(e);return t>=i?a(e,t,i,"day"):t>=o?a(e,t,o,"hour"):t>=r?a(e,t,r,"minute"):t>=n?a(e,t,n,"second"):e+" ms"}(e):function(e){var t=Math.abs(e);return t>=i?Math.round(e/i)+"d":t>=o?Math.round(e/o)+"h":t>=r?Math.round(e/r)+"m":t>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),i=n(5),a=n(4),s=n(2),u=n.n(s),c=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},l=n(7),d=(l("component-list"),function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o="";[].concat(t).forEach(function(e){o+="["+e+"]"}),n[0]=o+n[0],l("component-list:"+e).apply(void 0,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}(n))}}),f=(d("mini","普通"),d("error","错误"),d("model","模型")),p=(d("comp","组件"),d("render","渲染时")),m=d("act","交互行为"),b=d("io","数据请求"),h=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};function y(e,t){var n,r,o={};try{for(var i=h(t),a=i.next();!a.done;a=i.next()){var s=a.value;null!=e[s]&&(o[s]=e[s])}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o}var g,v,S,O,M,w,k,x,C,E,I=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},T=u.a.div.attrs({style:function(e){return e.style||{}}})(g||(g=I(["\n  display: ",";\n  width: 380px;\n  padding: 10px;\n\n  .list-select{\n    margin-right: 10px;\n  }\n\n  .list-input{\n    width: 175px\n  }\n"],["\n  display: ",";\n  width: 380px;\n  padding: 10px;\n\n  .list-select{\n    margin-right: 10px;\n  }\n\n  .list-input{\n    width: 175px\n  }\n"])),function(e){return e.visible?"block":"none"}),B=u.a.div.attrs({style:function(e){return e.style||{}}})(v||(v=I(["\n  margin-bottom: 10px;\n"],["\n  margin-bottom: 10px;\n"]))),z=u()(a.Select).attrs({style:function(e){return e.style||{}}})(S||(S=I(["\n   width: 175px;\n"],["\n   width: 175px;\n"]))),W=u()(a.Input).attrs({style:function(e){return e.style||{}}})(O||(O=I(["\n   width: 175px;\n"],["\n   width: 175px;\n"]))),j=u.a.div.attrs({style:function(e){return e.style||{}}})(M||(M=I(["\n  border-bottom: 1px solid #e9e9e9;\n  margin-bottom: 10px;\n  &:last-child{\n    border-bottom: none;\n    margin-bottom: 0;\n  }\n\n  h3{\n    margin-bottom: 10px;\n    color: #666;\n  }\n"],["\n  border-bottom: 1px solid #e9e9e9;\n  margin-bottom: 10px;\n  &:last-child{\n    border-bottom: none;\n    margin-bottom: 0;\n  }\n\n  h3{\n    margin-bottom: 10px;\n    color: #666;\n  }\n"]))),F=u.a.a.attrs({style:function(e){return e.style||{}}})(w||(w=I(["\n    display: block;\n    color: rgba(0,0,0,.65);\n    background-color: #f5f7f7;\n    margin-bottom: 10px;\n    margin-right: 10px;\n    padding: 10px;\n"],["\n    display: block;\n    color: rgba(0,0,0,.65);\n    background-color: #f5f7f7;\n    margin-bottom: 10px;\n    margin-right: 10px;\n    padding: 10px;\n"]))),P=u.a.div.attrs({style:function(e){return e.style||{}}})(k||(k=I(["\n    margin-bottom: 6px;\n"],["\n    margin-bottom: 6px;\n"]))),R=u.a.div.attrs({style:function(e){return e.style||{}}})(x||(x=I(["\n  color: #666;\n  display: inline-block;\n  margin-right: 10px;\n"],["\n  color: #666;\n  display: inline-block;\n  margin-right: 10px;\n"]))),A=u.a.div.attrs({style:function(e){return e.style||{}}})(C||(C=I(["\n  color: #C8C5C6;\n"],["\n  color: #C8C5C6;\n"]))),N=u.a.img.attrs({style:function(e){return e.style||{}}})(E||(E=I(["\n  max-width: 150px;\n  align-self: center;\n  display: block;\n"],["\n  max-width: 150px;\n  align-self: center;\n  display: block;\n"]))),L=n(6),_=n.n(L),D=n(3),q=n.n(D),G=new q.a;G.get("model","/model",function(e){var t=e.stores,n=e.request.query,r=n&&n.filter&&n.filter.trim().split(",");e.response.body={attributes:t.model.allAttibuteWithFilter(r)},e.response.status=200}),G.get("clients","/innerApps/:name",function(e){return function(e,t,n,r){return new(n||(n=Promise))(function(t,o){function i(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(i,a)}s((r=r.apply(e,[])).next())})}(this,0,void 0,function(){var t,n,r;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(o){return t=e.innerApps,n=e.params.name,r={success:!1,message:"",client:""},n?t?t[n]?(r.message="获取成功",r.client=t[n]):r.message=" innerApps 中不存在名为 "+n+" 的实例":r.message="不存在 innerApps 对象":r.message="传入参数 name 不能为空",e.response.body=r,e.response.status=200,[2]})})});var V=n(0),U=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},H=V.types.model("StyleModel",{_style:V.types.map(V.types.union(V.types.number,V.types.string))}).views(function(e){return{get style(){return e._style.toJSON()}}}).actions(function(e){return{setStyle:function(t){Object(V.applySnapshot)(e,{_style:t})}}}),J=["visible","theme","styles"],Y=V.types.model("ComponentListModel",{visible:V.types.optional(V.types.boolean,!0),_theme:V.types.map(V.types.union(V.types.number,V.types.string,V.types.boolean)),_styles:V.types.map(V.types.late(function(){return H}))}).views(function(e){return{get styles(){var t,n,r={};if(e._styles.size)try{for(var o=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(e._styles),i=o.next();!i.done;i=o.next()){var a=U(i.value,2),s=a[0],u=a[1];r[s]=u.style}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},get theme(){return e._theme.toJSON()},allAttibuteWithFilter:function(t){void 0===t&&(t=J);var n=[].concat(t||[]);return y(e,n)}}}).actions(function(e){return{setVisible:function(t){e.visible=!0===t||"true"===t},setTheme:function(t){e._theme=Object(V.cast)(t)},setStyle:function(t,n){var r=H.create({});r.setStyle(n),e._styles.set(t,r)}}}).actions(function(e){return{setStyles:function(t){Object.keys(t).forEach(function(n){e.setStyle(n,t[n])})},updateAttribute:function(t,n){return Q(e,t,n)},updateCssAttribute:function(t,n,r,o){void 0===r&&(r=!0),void 0===o&&(o=!0);var i={message:"",success:!0},a=e._styles.get(t);if(!a&&r)e.setStyle(t,n),i.message="目标样式不存在，新建 "+t+" 的样式";else if(a){var s=a.style;o?(a.setStyle(Object.assign({},s,n)),i.message="目标样式存在，覆盖 "+t+" 的样式"):(a.setStyle(n),i.message="目标样式存在，替换 "+t+" 的样式")}else i.message="不存在名为 "+t+" 的样式",i.success=!1;return i},updateTheme:function(t,n){var r={message:"",success:!1},o=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(U(arguments[t]));return e}(e._theme.keys());return t?e._theme.has(t)?(e._theme.set(t,n),r.success=!0):r.message="theme 对象中不存在 "+t+" 变量（支持的变量列表：["+o+"]）":r.message="请传入要更改的 theme 变量",r}}});function K(e){void 0===e&&(e=de);var t=Object.assign({},de,e),n=t.visible,r=t.theme,o=t.styles,i=Y.create({visible:n});return i.setStyles(o||{}),i.setTheme(r),i}function X(){return K({})}var $,Q=($=["visible","text","theme","styles"],function(e,t,n){return function(e,t,n){if(!e)throw new Error("[component-list] Invariant failed: 入参 item 必须存在")}(!!e),$.includes(t)?(e["set"+((r=t)?r.charAt(0).toUpperCase()+r.slice(1):"")](n),!0):(f("[更新属性] 属性名 "+t+" 不属于可更新范围，无法更新成 "+n+" 值；（附:可更新属性列表："+$+"）"),!1);var r}),Z=new q.a;Z.post("model","/model",function(e){var t=e.stores,n=e.request.data.model;t.setModel(K(n)),e.response.status=200});var ee=new q.a;ee.put("model","/model",function(e){var t=e.stores,n=e.request.data,r=n.name,o=n.value,i=t.model.updateAttribute(r,o);e.response.body={success:i},e.response.status=200}),ee.put("model","/model/styles/:target",function(e){var t=e.stores,n=e.request.data.style,r=e.params.target,o={message:"",success:!1};r?function(e){if(null===e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}(n)?o=t.model.updateCssAttribute(r,n):o.message="传入 css 对象格式不正确: "+n:o.message="传入 css 目标不能为空",e.response.body=o,e.response.status=200}),ee.put("model","/model/theme/:target",function(e){var t=e.stores,n=e.request.data.value,r=e.params.target;e.response.body=t.model.updateTheme(r,n),e.response.status=200});var te=new q.a;te.del("model","/model",function(e){var t=e.stores;e.response.body={node:t.resetToEmpty()},e.response.status=200});var ne=function(e,t){var n=this;void 0===t&&(t={});var r=new _.a({domain:"component-list"});return r.use(function(r,o){return function(e,t,n,r){return new(n||(n=Promise))(function(t,o){function i(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(i,a)}s((r=r.apply(e,[])).next())})}(n,0,void 0,function(){var n;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(i){switch(i.label){case 0:return r.stores=e,r.innerApps=t,n=r.request.url,b("["+e.id+"] request: "+JSON.stringify(r.request.toJSON())),[4,o()];case 1:return i.sent(),b("["+e.id+"] ["+r.request.method+"] "+n+" ==> response: "+JSON.stringify(r.response.toJSON())),[2]}})})}),r.use(G.routes()),r.use(Z.routes()),r.use(ee.routes()),r.use(te.routes()),r},re="scl_",oe=["model"],ie=V.types.model("StoresModel",{id:V.types.refinement(V.types.identifier,function(e){return 0===e.indexOf(re)}),model:Y}).actions(function(e){return{setModel:function(t){e.model=Object(V.cast)(t)},resetToEmpty:function(){e.model=X()}}}),ae=1;function se(){return{stores:ie.create({id:""+re+ae++,model:X()}),innerApps:{}}}var ue=function(){return(ue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ce=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},le=a.Select.Option,de={visible:!0,theme:{main:"#25ab68"},list:{},styles:{container:{},input:{width:175}}},fe=function(e){var t=function(e){void 0===e&&(e=de);var t=Object.assign({},de,e),n=t.visible,i=t.list,u=t.styles,c=t.theme,l=function(t){return function(n){var r=e.onSelectItem;r&&r(t)}},d=ce(Object(r.useState)(""),2),f=d[0],p=d[1],b=ce(Object(r.useState)(""),2),h=b[0],y=b[1],g=function(t,n){if(e.list){var r={};if(t?r[t]=e.list[t]:r=e.list,m("[类别筛选] 通过 select 筛选后：%o",r),n){var o=Object.keys(r),i={result:{title:"搜索结果",list:[]}};return o.map(function(e){r[e].list.map(function(e){(new RegExp(n).test(e.desc)||new RegExp(n).test(e.name.toLowerCase()))&&i.result.list.push(e)})}),m("[筛选] 通过 input 筛选后：%o",i),i}return r}}(f,h),v=Object.keys(g||{}),S=Object.keys(i||{});return o.a.createElement(s.ThemeProvider,{theme:c},o.a.createElement(T,{style:u.container,visible:n,className:"ide-component-list-container"},o.a.createElement(B,{style:u.filterWrap},o.a.createElement(z,{style:u.select,className:"list-select",defaultValue:"",onChange:function(e){p(e)}},o.a.createElement(le,{value:""},"全部"),S.map(function(e){var t=i[e];return o.a.createElement(le,{key:e,value:e},t.title)})),o.a.createElement(W,{className:"list-input",style:u.input,placeholder:"搜索",onChange:function(e){y(e.target.value)}})),!e.list&&o.a.createElement(a.Alert,{message:"请给组件传入 list 列表",type:"error"})||null,v.map(function(e){var t=g[e],n=t.list,r=t.title;return o.a.createElement(j,{style:u.groupWrap,key:r,className:"group-wrap"},o.a.createElement("h3",null,r),o.a.createElement(a.Row,null,n.map(function(e){return o.a.createElement(a.Col,{key:e.name,span:12},o.a.createElement(F,{style:u.itemWrap,href:"javascript:void(0)",className:"item-wrap",onClick:l(e)},o.a.createElement(P,{style:u.itemInfo,className:"item-info"},o.a.createElement(R,{style:u.itemDesc,className:"item-desc"},e.desc),o.a.createElement(A,{style:u.itemName,className:"item-name"},e.name)),o.a.createElement(N,{style:u.itemImage,src:e.image,className:"item-image"})))})))})))};return t.displayName="ComponentListHOC",Object(i.observer)(t)},pe=fe(),me=function(e){var t=fe(),n=function(n){var r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n}(n,[]),i=y(e.model,J);return p("["+e.id+"] rendering."),f("["+e.id+"] controlledProps: %o",i),o.a.createElement(t,ue({},i,r))};return n.displayName="ComponentListWithStore",Object(i.observer)(n)},be=function(){var e=se(),t=e.stores,n=e.innerApps,r=ne(t,n);return{stores:t,app:r,client:r.client,ComponentListWithStore:me(t)}};n.d(t,"DEFAULT_PROPS",function(){return de}),n.d(t,"ComponentListHOC",function(){return fe}),n.d(t,"ComponentList",function(){return pe}),n.d(t,"ComponentListAddStore",function(){return me}),n.d(t,"ComponentListFactory",function(){return be}),n.d(t,"CONTROLLED_KEYS",function(){return J}),n.d(t,"ComponentListModel",function(){return Y}),n.d(t,"createModel",function(){return K}),n.d(t,"createEmptyModel",function(){return X}),n.d(t,"updateModelAttribute",function(){return Q}),n.d(t,"STORE_ID_PREIX",function(){return re}),n.d(t,"STORES_CONTROLLED_KEYS",function(){return oe}),n.d(t,"Stores",function(){return ie}),n.d(t,"StoresFactory",function(){return se}),n.d(t,"AppFactory",function(){return ne})}]))},function(e,t,n){"use strict";n.r(t);var r,o,i,a=n(3),s=n.n(a),u=n(6),c=n(12),l=n.n(c),d=n(1),f=n(0),p=n(8),m=n(9),b=n(7),h=n.n(b),y=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},g=h.a.div.attrs({style:function(e){return e.style||{}}})(r||(r=y(["\n"],["\n"]))),v=h.a.div.attrs({style:function(e){return e.style||{}}})(o||(o=y(["\n  position: fixed;\n  top: 10px;\n  left: 200px;\n  z-index: 99;\n  display: ",";\n  height: ",";\n  overflow-y: ",";\n  box-shadow: 0 2px 8px rgba(0,0,0,.2);\n  background-color: #fff;\n  border-radius: 4px;\n  background-clip: padding-box;\n"],["\n  position: fixed;\n  top: 10px;\n  left: 200px;\n  z-index: 99;\n  display: ",";\n  height: ",";\n  overflow-y: ",";\n  box-shadow: 0 2px 8px rgba(0,0,0,.2);\n  background-color: #fff;\n  border-radius: 4px;\n  background-clip: padding-box;\n"])),function(e){return e.visible?"inline-block":"none"},function(e){return e.height?e.height-20+"px":"auto"},function(e){return e.height?"scroll":"visible"}),S=h.a.div.attrs({style:function(e){return e.style||{}}})(i||(i=y(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 98;\n  display: ",";\n  height: ",";\n  width: ",";\n  background-color: ",";\n"],["\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 98;\n  display: ",";\n  height: ",";\n  width: ",";\n  background-color: ",";\n"])),function(e){return e.visible?"block":"none"},function(e){return e.height?e.height+"px":"auto"},function(e){return e.width?e.width+"px":"auto"},function(e){return e.color?""+e.color:"auto"}),O=n(13),M=Object(d.createDebuggers)("component-tree"),w=(M.debugBase,M.debugComp,M.debugError,M.debugIO),k=(M.debugInteract,M.debugMini),x=(M.debugModel,M.debugRender),C=n(2),E=n(11);function I(e){return Object(E.map)(e,function(e){var t=Object.assign({},e);return t.name=e.name||e.component,t.screenId=e.screenId||e.id,t},!0)}function T(e){void 0===e&&(e=he);var t=Object.assign({},he,e),n=t.listVisible,r=t.theme,o=t.styles,i=R.create({listVisible:n});return i.setStyles(o||{}),i.setTheme(r),i}function B(){return T({})}var z,W=f.BASE_CONTROLLED_KEYS.concat(["listVisible"]),j=Object(f.updateInScope)(W),F=Object(f.stringLiterals)("listVisible"),P=f.BASE_CONTROLLED_KEYS.concat(F),R=f.BaseModel.named("ComponentTreeModel").props({listVisible:C.types.optional(C.types.boolean,!1)}).views(function(e){return{allAttibuteWithFilter:function(t){void 0===t&&(t=P);var n=[].concat(t||[]);return Object(d.pick)(e,n)}}}).actions(function(e){return{setListVisible:function(t){e.listVisible=!0===t||"true"===t}}}).actions(function(e){return{updateAttribute:function(t,n){return j(e,t,n)}}}),A=(C.types.model("FuncModel",{name:C.types.optional(C.types.string,""),body:C.types.optional(C.types.string,"")}).views(function(e){return{get definition(){return"window['"+e.name+"'] = "+e.body}}}),function(){return(A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),N="sct_";!function(e){e.schemaTree="schemaTree",e.contextMenu="contextMenu"}(z||(z={}));var L=Object.values(z),_={schemaTree:p.Stores,contextMenu:m.Stores},D={schemaTree:p.SchemaTreeFactory,contextMenu:m.ContextMenuFactory},q=C.types.model("StoresModel",A({id:C.types.refinement(C.types.identifier,function(e){return 0===e.indexOf(N)}),model:R},_)).actions(function(e){var t=Object(f.getSubStoresAssigner)(e,L);return A({setModel:function(t){e.model=Object(C.cast)(t)}},t,{resetToEmpty:function(){e.model=B()}})}),G=1;function V(){var e=Object(f.getSubAppsFromFactoryMap)(D),t=e.subStores,n=e.subApps,r=e.subClients;return{stores:q.create(A({id:""+N+G++,model:B()},t),{clients:r}),innerApps:n}}var U=n(10),H=n.n(U),J=n(4),Y=n.n(J),K=new Y.a;K.get("clients","/innerApps/:name",f.getInnerAppsMiddleware);var X=new Y.a,$=new Y.a;$.put("model","/model",function(e){var t=e.stores,n=e.request.data,r=n.name,o=n.value,i=t.model.updateAttribute(r,o);e.response.body={success:i},e.response.status=200}),$.put("menu","/menu/autoposition",function(e){return function(e,t,n,r){return new(n||(n=Promise))(function(t,o){function i(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(i,a)}s((r=r.apply(e,[])).next())})}(this,0,void 0,function(){var t,n,r,o,i,a;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(s){switch(s.label){case 0:return t=e.request,n=t.data,r=n.x,o=n.y,[4,(i=Object(f.getClientFromCtx)(e,z.contextMenu)).put("/menu/position?type=event",{x:r,y:o})];case 1:return a=s.sent().body,i.put("/menu",{name:"visible",value:!0}),a.area&&i.post("/menu/bufferAreas",{area:a.area}),e.response.body=a,e.response.status=200,[2]}})})}),$.put("model","/model/styles/:target",Object(f.updateStylesMiddleware)("model")),$.put("model","/model/theme/:target",Object(f.updateThemeMiddleware)("model"));var Q=new Y.a,Z=function(e,t){var n=this;void 0===t&&(t={});var r=new H.a({domain:"component-tree"});return r.innerApps=t,r.use(function(r,o){return function(e,t,n,r){return new(n||(n=Promise))(function(t,o){function i(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(i,a)}s((r=r.apply(e,[])).next())})}(n,0,void 0,function(){var n;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(i){switch(i.label){case 0:return r.stores=e,r.innerApps=t,n=r.request.url,w("["+e.id+"] request: "+JSON.stringify(r.request.toJSON())),[4,o()];case 1:return i.sent(),w("["+e.id+"] ["+r.request.method+"] "+n+" ==> response: "+JSON.stringify(r.response.toJSON())),[2]}})})}),Object(f.applyProxy)(r,[{name:z.schemaTree,targets:["tree","nodes","selection","buffers"]},{name:z.contextMenu,targets:["menu","items"]}]),r.use(K.routes()),r.use(X.routes()),r.use($.routes()),r.use(Q.routes()),r};Object(d.invariant)(!!GOURD_WIDGET.list,"不存在变量名为 GOURD_WIDGET 的公共组件列表");var ee=GOURD_WIDGET.list,te=GOURD_WIDGET.schema,ne=function(e){var t=[],n={};for(var r in e)t=t.concat(ee[r].list);return t.forEach(function(e){var t=e.name;n[t]=e,n[t].defaults={},n[t].children&&n[t].children.length&&(n[t].children=n[t].children.map(function(e){return e.name=e.component,e})),setTimeout(function(){if(te[t]){var e=te[t];if(e.properties)for(var r in e.properties){var o=e.properties[r];if(o.properties)for(var i in o.properties){var a=o.properties[i];a.default&&(n[t].defaults[i]=a.default)}}}},0)}),n}(ee);function re(e){Object(d.invariant)(!!e,"[getSchemaByName] 目标 schema 的 name 不能为空");var t={name:e},n=ne[e];return n&&(n.props||n.defaults)&&(t.props=Object.assign({},n.props,n.defaults)),k("[getSchemaByName] 根据 name 生成的 schema 对象: %o",t),t}var oe=n(5),ie=Object(f.getSubRouterPrefix)(z),ae=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},se=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ue=["createSub","createUp","createDown"],ce=function(e){return function(t,n,r){return ae(void 0,void 0,void 0,function(){var n;return se(this,function(r){return n=e.stores,e.client,~ue.indexOf(t)&&n.model.setListVisible(!0),[2]})})}},le=function(e){return function(t,n,r){return ae(void 0,void 0,void 0,function(){var n,r,o,i,a,s,u,c,l;return se(this,function(p){switch(p.label){case 0:return[4,(n=e.client).get(ie.schemaTree+"/selection")];case 1:if(r=p.sent(),o=Object(d.getValueByPath)(r,"body.data.id"),Object(f.hasEtteException)(r,["schemaTree","get","selection"]))return[2];switch(t){case"copy":return[3,2];case"paste":return[3,6];case"delete":return[3,8]}return[3,11];case 2:return o?[4,n.post(ie.schemaTree+"/nodes/"+o+"/clone")]:[3,4];case 3:return i=p.sent(),Object(d.getValueByPath)(i,"body.data.target")&&oe.message.info("已拷贝节点 "+o),[3,5];case 4:oe.message.error("拷贝失败，无法获取选中节点 id"),p.label=5;case 5:return[3,12];case 6:return[4,n.post(ie.schemaTree+"/nodes/"+o+"/children",{useBuffer:!0})];case 7:return a=p.sent(),Object(f.hasEtteException)(a,["schemaTree","paste","buffer"])||((c=Object(d.getValueByPath)(a,"body.data.node"))?n.put(ie.schemaTree+"/selection/"+c.id):oe.message.info("粘贴失败: 请先 copy 节点才能进行粘贴操作")),[3,12];case 8:return[4,n.get(ie.schemaTree+"/nodes/"+o+"/parent?filter=id")];case 9:return s=p.sent(),[4,n.del(ie.schemaTree+"/nodes/"+o)];case 10:return u=p.sent(),Object(f.hasEtteException)(u,["schemaTree","del"])||((c=Object(d.getValueByPath)(u,"body.data.node"))?(l=Object(d.getValueByPath)(s,"body.data.node.id"),n.put(ie.schemaTree+"/selection/"+l)):oe.message.info("删除失败: 当前节点不存在")),[3,12];case 11:return[3,12];case 12:return[2]}})})}},de=function(e){return function(t,n,r){return ae(void 0,void 0,void 0,function(){return se(this,function(t){return e.client.put("/clients/contextMenu/menu",{name:"visible",value:!1}),[2]})})}},fe=["createSub","createUp","createDown","delete"],pe=function(e){return function(t){var n=e.client,r=t.node,o=t.event,i=!r.parentId;n.put(ie.schemaTree+"/selection/"+r.id),n.get(ie.schemaTree+"/buffers/clone").then(function(e){if(!Object(f.hasEtteException)(e,["schemaTree","buffer","clone"])){var t=Object(d.getValueByPath)(e,"body.data.node");n.put(ie.contextMenu+"/items/paste",{name:"disabled",value:!t})}}),fe.forEach(function(e){n.put(ie.contextMenu+"/items/"+e,{name:"disabled",value:i})}),n.put("/menu/autoposition",{x:o.clientX,y:o.clientY})}},me=function(e){return function(t){var n=e.stores,r=e.client,o=n[z.schemaTree],i=n[z.contextMenu].selectedKey;console.log("当前选中的组件：",t,i),r.put("/model",{name:"listVisible",value:!1});var a=re(t.name),s=o.model.selectedId,u="createSub"===i?"children":"sibling",c=ie.schemaTree+"/nodes/"+s+"/"+u,l="children"===u?{schema:a}:{schema:a,offset:"createUp"===i?"0":"1"};s?r.post(c,l).then(function(e){var n=Object(d.getValueByPath)(e,"body.data.node.id");(t.children||[]).forEach(function(e){r.post(ie.schemaTree+"/nodes/"+n+"/children",{schema:re(e.name)})})}):oe.message.info("因没有选中任何节点，添加失败")}},be=function(){return(be=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},he={theme:{main:"#25ab68"},listVisible:!1,styles:{container:{}}},ye=function(e){var t=function(t){var n,r=e.SchemaTreeComponent,o=e.ContextMenuComponent,i=Object.assign({},he,t),a=i.schemaTree,u=i.contextMenu,c=i.styles,d=(i.theme,i.listVisible),f=i.onClickListOutside,p=i.onSelectListItem,m=s.a.useRef(null),b=l()();return s.a.createElement(g,{style:c.container,className:"ide-component-tree-container"},s.a.createElement(r,be({},a)),s.a.createElement(o,be({},u)),s.a.createElement(S,{className:"modal-layer",visible:d,height:b.innerHeight,width:b.innerWidth,onClick:(n=m,function(e){if(m){var t=n.current,r=t.offsetWidth,o=t.offsetHeight,i=e.clientX,a=e.clientY;null!==t&&!(i>200&&i<200+r&&a>10&&a<10+o)&&f(e)}})}),s.a.createElement(v,{className:"component-list-wrap",ref:m,visible:d,height:b.innerHeight},s.a.createElement(O.ComponentList,{list:ee,onSelectItem:function(e){p&&p(e)}})))};return t.displayName="ComponentTreeHOC",Object(u.observer)(Object(f.based)(t,he))},ge=ye({SchemaTreeComponent:p.SchemaTree,ContextMenuComponent:m.ContextMenu}),ve=function(e){var t=e.stores,n=ye({SchemaTreeComponent:Object(p.SchemaTreeAddStore)(t.schemaTree),ContextMenuComponent:Object(m.ContextMenuAddStore)(t.contextMenu)}),r=function(r){var o=r.schemaTree,i=void 0===o?{}:o,a=r.contextMenu,u=void 0===a?{}:a,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n}(r,["schemaTree","contextMenu"]),l=t.model,p=Object(d.pick)(l,P);x("["+t.id+"] rendering");var m=Object(f.useInjectedEvents)(e,u,{onClickItem:[ce,le,de]}),b=Object(f.useInjectedEvents)(e,i,{onRightClickNode:[pe]});console.log("-8888-",i);var h=Object(f.useInjectedEvents)(e,c,{onSelectListItem:[me]});return s.a.createElement(n,be({schemaTree:b,contextMenu:m},p,h))};return r.displayName="ComponentTreeWithStore",Object(u.observer)(r)},Se=function(){var e=V(),t=e.stores,n=e.innerApps,r=Z(t,n);return{stores:t,app:r,client:r.client,innerApps:n}},Oe=function(){var e=Se();return be({},e,{ComponentTreeWithStore:ve(e)})};n.d(t,"DEFAULT_PROPS",function(){return he}),n.d(t,"ComponentTreeHOC",function(){return ye}),n.d(t,"ComponentTree",function(){return ge}),n.d(t,"ComponentTreeAddStore",function(){return ve}),n.d(t,"ComponentTreeStoresEnv",function(){return Se}),n.d(t,"ComponentTreeFactory",function(){return Oe}),n.d(t,"CONTROLLED_KEYS",function(){return P}),n.d(t,"ComponentTreeModel",function(){return R}),n.d(t,"jsonConverter",function(){return I}),n.d(t,"createModel",function(){return T}),n.d(t,"createEmptyModel",function(){return B}),n.d(t,"updateModelAttribute",function(){return j}),n.d(t,"STORE_ID_PREIX",function(){return N}),n.d(t,"ESubApps",function(){return z}),n.d(t,"NAMES_SUBAPP",function(){return L}),n.d(t,"STORES_SUBAPP",function(){return _}),n.d(t,"FACTORY_SUBAPP",function(){return D}),n.d(t,"Stores",function(){return q}),n.d(t,"StoresFactory",function(){return V}),n.d(t,"COMP_LIST",function(){return ee}),n.d(t,"SCHEMA_LIST",function(){return te}),n.d(t,"COMP_LIST_MAP",function(){return ne}),n.d(t,"getSchemaByName",function(){return re}),n.d(t,"AppFactory",function(){return Z})}]))},function(e,t,n){var r,o,i,a,s,u,c,l,d;window,e.exports=(r=n(3),o=n(2),i=n(1),a=n(13),s=n(4),u=n(5),c=n(8),l=n(7),d=n(12),function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t){e.exports=r},function(e,t){e.exports=o},function(e,t){e.exports=i},function(e,t){e.exports=a},function(e,t){e.exports=s},function(e,t){e.exports=u},function(e,t){e.exports=c},function(e,t){e.exports=l},function(e,t){e.exports=d},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),i=n(6),a=n(3),s=n(5),u=n(2),c=Object(s.createDebuggers)("header-bar"),l=(c.debugBase,c.debugComp,c.debugError,c.debugIO),d=c.debugInteract,f=(c.debugMini,c.debugModel,c.debugRender),p=n(7),m=n.n(p);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e){return Math.round(255*e)}function y(e,t,n){return h(e)+","+h(t)+","+h(n)}function g(e,t,n,r){if(void 0===r&&(r=y),0===t)return r(n,n,n);var o=e%360/60,i=(1-Math.abs(2*n-1))*t,a=i*(1-Math.abs(o%2-1)),s=0,u=0,c=0;o>=0&&o<1?(s=i,u=a):o>=1&&o<2?(s=a,u=i):o>=2&&o<3?(u=i,c=a):o>=3&&o<4?(u=a,c=i):o>=4&&o<5?(s=a,c=i):o>=5&&o<6&&(s=i,c=a);var l=n-i/2;return r(s+l,u+l,c+l)}var v={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},S=/^#[a-fA-F0-9]{6}$/,O=/^#[a-fA-F0-9]{8}$/,M=/^#[a-fA-F0-9]{3}$/,w=/^#[a-fA-F0-9]{4}$/,k=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/,x=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/,C=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/,E=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/;function I(e){if("string"!=typeof e)throw new Error("Passed an incorrect argument to a color function, please pass a string representation of a color.");var t=function(e){if("string"!=typeof e)return e;var t=e.toLowerCase();return v[t]?"#"+v[t]:e}(e);if(t.match(S))return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16)};if(t.match(O)){var n=parseFloat((parseInt(""+t[7]+t[8],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16),alpha:n}}if(t.match(M))return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16)};if(t.match(w)){var r=parseFloat((parseInt(""+t[4]+t[4],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16),alpha:r}}var o=k.exec(t);if(o)return{red:parseInt(""+o[1],10),green:parseInt(""+o[2],10),blue:parseInt(""+o[3],10)};var i=x.exec(t);if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10),alpha:parseFloat(""+i[4])};var a=C.exec(t);if(a){var s="rgb("+g(parseInt(""+a[1],10),parseInt(""+a[2],10)/100,parseInt(""+a[3],10)/100)+")",u=k.exec(s);if(!u)throw new Error("Couldn't generate valid rgb string from "+t+", it returned "+s+".");return{red:parseInt(""+u[1],10),green:parseInt(""+u[2],10),blue:parseInt(""+u[3],10)}}var c=E.exec(t);if(c){var l="rgb("+g(parseInt(""+c[1],10),parseInt(""+c[2],10)/100,parseInt(""+c[3],10)/100)+")",d=k.exec(l);if(!d)throw new Error("Couldn't generate valid rgb string from "+t+", it returned "+l+".");return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:parseFloat(""+c[4])}}throw new Error("Couldn't parse the color string. Please provide the color as a string in hex, rgb, rgba, hsl or hsla notation.")}var T=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e};function B(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function z(e){return B(Math.round(255*e))}function W(e,t,n){return T("#"+z(e)+z(t)+z(n))}function j(e,t,n){return g(e,t,n,W)}function F(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return T("#"+B(e)+B(t)+B(n));if("object"==typeof e&&void 0===t&&void 0===n)return T("#"+B(e.red)+B(e.green)+B(e.blue));throw new Error("Passed invalid arguments to rgb, please pass multiple numbers e.g. rgb(255, 205, 100) or an object e.g. rgb({ red: 255, green: 205, blue: 100 }).")}var P=function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&("number"!=typeof e.alpha||void 0===e.alpha)},R=function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&"number"==typeof e.alpha},A=function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&("number"!=typeof e.alpha||void 0===e.alpha)},N=function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&"number"==typeof e.alpha},L="Passed invalid argument to toColorString, please pass a RgbColor, RgbaColor, HslColor or HslaColor object.";function _(e,t,n){return Math.max(e,Math.min(t,n))}var D,q,G,V,U=function(e){return function e(t,n,r){return function(){var o=r.concat(Array.prototype.slice.call(arguments));return o.length>=n?t.apply(this,o):e(t,n,o)}}(e,e.length,[])}(function(e,t){var n=function(e){return function(e){var t,n=e.red/255,r=e.green/255,o=e.blue/255,i=Math.max(n,r,o),a=Math.min(n,r,o),s=(i+a)/2;if(i===a)return void 0!==e.alpha?{hue:0,saturation:0,lightness:s,alpha:e.alpha}:{hue:0,saturation:0,lightness:s};var u=i-a,c=s>.5?u/(2-i-a):u/(i+a);switch(i){case n:t=(r-o)/u+(r<o?6:0);break;case r:t=(o-n)/u+2;break;default:t=(n-r)/u+4}return t*=60,void 0!==e.alpha?{hue:t,saturation:c,lightness:s,alpha:e.alpha}:{hue:t,saturation:c,lightness:s}}(I(e))}(t);return function(e){if("object"!=typeof e)throw new Error(L);if(R(e))return function(e,t,n,r){if("object"==typeof e)return e.alpha>=1?F(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new Error("Passed invalid arguments to rgba, please pass multiple numbers e.g. rgb(255, 205, 100, 0.75) or an object e.g. rgb({ red: 255, green: 205, blue: 100, alpha: 0.75 }).")}(e);if(P(e))return F(e);if(N(e))return function(e,t,n,r){if("object"==typeof e)return e.alpha>=1?j(e.hue,e.saturation,e.lightness):"rgba("+g(e.hue,e.saturation,e.lightness)+","+e.alpha+")";throw new Error("Passed invalid arguments to hsla, please pass multiple numbers e.g. hsl(360, 0.75, 0.4, 0.7) or an object e.g. rgb({ hue: 255, saturation: 0.4, lightness: 0.75, alpha: 0.7 }).")}(e);if(A(e))return function(e,t,n){if("object"==typeof e)return j(e.hue,e.saturation,e.lightness);throw new Error("Passed invalid arguments to hsl, please pass multiple numbers e.g. hsl(360, 0.75, 0.4) or an object e.g. rgb({ hue: 255, saturation: 0.4, lightness: 0.75 }).")}(e);throw new Error(L)}(b({},n,{saturation:_(0,1,n.saturation-parseFloat(e))}))}),H=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},J=m.a.div.attrs({style:function(e){return e.style||{}}})(D||(D=H(["\n  width: 100%;\n  background: white;\n  height: ",";\n  border-bottom: 2px solid ",";\n"],["\n  width: 100%;\n  background: white;\n  height: ",";\n  border-bottom: 2px solid ",";\n"])),function(e){return e.height||"65px"},function(e){return e.theme.main}),Y=m.a.img.attrs({style:function(e){return e.style||{}}})(q||(q=H(["\n  max-width: 210px;\n  max-height: 64px;\n"],["\n  max-width: 210px;\n  max-height: 64px;\n"]))),K=m.a.div.attrs({style:function(e){return e.style||{}}})(G||(G=H(["\n  margin-top: 5px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: center;\n  color: ",";\n  &:hover {\n    color: ",";\n  }\n  .oper-icon {\n    font-size: 24px;\n    margin-bottom: 4px;\n  }\n  .oper-name {\n    font-size: 12px;\n  }\n"],["\n  margin-top: 5px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: center;\n  color: ",";\n  &:hover {\n    color: ",";\n  }\n  .oper-icon {\n    font-size: 24px;\n    margin-bottom: 4px;\n  }\n  .oper-name {\n    font-size: 12px;\n  }\n"])),function(e){return e.active?e.theme.main:e.theme.second},function(e){return e.theme.main}),X=m()(a.Button).attrs({style:function(e){return e.style||{}}})(V||(V=H(["\n  margin: 0 5px;\n  &.ant-btn-primary,\n  &.ant-btn-primary:focus {\n    background-color: ",";\n    border-color: ",";\n    &:hover {\n      background-color: ",";\n    }\n  }\n"],["\n  margin: 0 5px;\n  &.ant-btn-primary,\n  &.ant-btn-primary:focus {\n    background-color: ",";\n    border-color: ",";\n    &:hover {\n      background-color: ",";\n    }\n  }\n"])),function(e){return e.theme.main},function(e){return e.theme.main},function(e){return e.theme.main?U(.2,e.theme.main):"inherit"}),$=n(8),Q=n.n($),Z=n(4),ee=n.n(Z),te=new ee.a;te.get("getModelInstance","/headerbar",function(e){var t=e.stores,n=e.request.query,r=n&&n.filter&&n.filter.trim().split(",");Object(u.buildNormalResponse)(e,200,{attributes:t.model.allAttibuteWithFilter(r)})});var ne=n(0),re=ne.types.model("ButtonModel",{id:ne.types.identifier,title:ne.types.string,icon:ne.types.maybe(ne.types.string)}),oe=ne.types.model("IconTextModel",{id:ne.types.identifier,title:ne.types.optional(ne.types.string,""),icon:ne.types.optional(ne.types.string,""),isActive:ne.types.optional(ne.types.boolean,!1)}),ie=u.BASE_CONTROLLED_KEYS.concat(["logo","buttons","iconTexts"]),ae=u.BaseModel.named("HeaderBarModel").props({logo:ne.types.optional(ne.types.string,""),buttons:ne.types.array(re),iconTexts:ne.types.array(oe)}).views(function(e){return{allAttibuteWithFilter:function(t){void 0===t&&(t=ie);var n=[].concat(t||[]);return Object(s.pick)(e,n)}}}).actions(function(e){return{setLogo:function(t){e.logo=t},setButtons:function(t){var n=t;"string"==typeof t&&(n=JSON.parse(t)),e.buttons=[].concat(n).map(function(e){return re.create(e)})},setIconTexts:function(t){var n=t;"string"==typeof t&&(n=JSON.parse(t)),e.iconTexts=[].concat(n).map(function(e){return oe.create(e)})}}}).actions(function(e){return{updateAttribute:function(t,n){return le(e,t,n)}}});function se(e){void 0===e&&(e=Ce);var t=Object.assign({},Ce,e),n=t.logo,r=t.buttons,o=t.iconTexts,i=t.theme,a=t.styles,s=ae.create({logo:n,buttons:r,iconTexts:o});return s.setStyles(a||{}),s.setTheme(i),s}function ue(){return se({})}var ce=u.BASE_CONTROLLED_KEYS.concat(["logo","buttons","iconTexts","theme","styles"]),le=Object(u.updateInScope)(ce),de=new ee.a;de.post("createModel","/headerbar",function(e){var t=e.stores,n=e.request.data.model;t.setModel(se(n)),Object(u.buildNormalResponse)(e,200,{success:!0})});var fe=new ee.a;fe.put("updateModel","/headerbar",function(e){var t=e.stores,n=e.request.data,r=n.name,o=n.value,i=t.model[r],a=t.model.updateAttribute(r,o);Object(u.buildNormalResponse)(e,200,{success:a,origin:i},"属性 "+r+" 的值从 "+i+" -> "+o+" 的变更: "+a)}),fe.put("updateStyles","/model/styles/:target",Object(u.updateStylesMiddleware)("model")),fe.put("updateTheme","/model/theme/:target",Object(u.updateThemeMiddleware)("model"));var pe=new ee.a;pe.del("resetModel","/headerbar",function(e){var t=e.stores;Object(u.buildNormalResponse)(e,200,{node:t.resetToEmpty()})});var me,be=function(e,t){var n=this;void 0===t&&(t={});var r=new Q.a({domain:"header-bar"});return r.innerApps=t,r.use(function(r,o){return function(e,t,n,r){return new(n||(n=Promise))(function(t,o){function i(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(i,a)}s((r=r.apply(e,[])).next())})}(n,0,void 0,function(){var n;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(i){switch(i.label){case 0:return r.stores=e,r.innerApps=t,n=r.request.url,l("["+e.id+"] request: "+JSON.stringify(r.request.toJSON())),[4,o()];case 1:return i.sent(),l("["+e.id+"] ["+r.request.method+"] "+n+" ==> response: "+JSON.stringify(r.response.toJSON())),[2]}})})}),r.use(te.routes()),r.use(de.routes()),r.use(fe.routes()),r.use(pe.routes()),r},he=function(){return(he=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ye="shb_",ge=["model"];me||(me={});var ve={},Se=ne.types.model("StoresModel",{id:ne.types.refinement(ne.types.identifier,function(e){return 0===e.indexOf(ye)}),model:ae}).actions(function(e){return{setModel:function(t){e.model=Object(ne.cast)(t)},resetToEmpty:function(){e.model=ue()}}}),Oe=1;function Me(){var e=Object(u.getSubAppsFromFactoryMap)(ve),t=e.subStores,n=e.subApps,r=e.subClients;return{stores:Se.create(he({id:""+ye+Oe++,model:ue()},t),{clients:r}),innerApps:n}}var we=function(e){return function(t,n,r){return function(e,t,n,r){return new(n||(n=Promise))(function(e,t){function o(e){try{a(r.next(e))}catch(e){t(e)}}function i(e){try{a(r.throw(e))}catch(e){t(e)}}function a(t){t.done?e(t.value):new n(function(e){e(t.value)}).then(o,i)}a((r=r.apply(void 0,[])).next())})}(0,0,void 0,function(){return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(t){return e.stores,e.client,[2]})})}},ke=function(){return(ke=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},xe={},Ce={logo:"https://img.alicdn.com/tfs/TB1ysi8SpXXXXcJXpXXXXXXXXXX-210-60.jpg",buttons:[{id:"save",title:"保存",icon:"save"}],iconTexts:[{title:"选取元素",icon:"select",id:"selection",isActive:!0},{title:"全屏",icon:"scan",id:"fullscreen"},{title:"预览页面",icon:"eye",id:"preview"},{title:"历史记录",icon:"clock-circle",id:"history"}],theme:{main:"#25ab68",second:"#333"},styles:{container:{}}},Ee=Object(i.observer)(function(e){var t=Object(r.useCallback)(function(t){return function(n){d("[按钮点击] id: "+t.id+", title: "+t.title),e.onClickButton&&e.onClickButton(t,n)}},[e.onClickButton]),n=e.buttons;return o.a.createElement(o.a.Fragment,null,n.length>0&&n.map(function(e){var n=e.title,r=e.id,i=e.icon;return o.a.createElement(X,{key:r,type:"primary",className:"btnSave",onClick:t(e),icon:i},n)})||null)});Ee.displayName="HeaderBarButtons";var Ie=Object(i.observer)(function(e){var t=e.iconTexts,n=Object(r.useCallback)(function(t){return function(){d("[icon text 点击] id: "+t.id+", title: "+t.title),e.onClickIconText&&e.onClickIconText(t)}},[e.onClickIconText]);return o.a.createElement(a.Row,{type:"flex",justify:"space-around",align:"middle"},t.length>0&&t.map(function(e){var t=e.id,r=e.title,i=e.isActive,s=e.icon;return o.a.createElement(a.Col,{key:t},o.a.createElement(K,{active:i,onClick:n(e),className:"oper-wrap"},o.a.createElement(a.Icon,{className:"oper-icon",type:s}),o.a.createElement("span",{className:"oper-name"},r)))})||null)});Ie.displayName="HeaderBarIconTexts";var Te=function(e){var t=function(e){var t=e.logo,n=e.buttons,r=e.iconTexts,i=e.styles,s=e.onClickButton,u=e.onClickIconText;return o.a.createElement(J,{style:i.container,className:"ide-header-bar-container"},o.a.createElement(a.Row,{type:"flex",justify:"space-between",align:"middle"},o.a.createElement(a.Col,{span:6},o.a.createElement(a.Row,{type:"flex",justify:"center",align:"middle"},o.a.createElement(Y,{style:i.logo,src:t,alt:"logo"}))),o.a.createElement(a.Col,{span:18},o.a.createElement(a.Row,{type:"flex",justify:"space-between",align:"middle"},o.a.createElement(a.Col,{span:14},o.a.createElement(Ee,{buttons:n,onClickButton:s})),o.a.createElement(a.Col,{span:10},o.a.createElement(Ie,{iconTexts:r,onClickIconText:u}))))))};return t.displayName="HeaderBarHOC",Object(i.observer)(Object(u.based)(t,Ce))},Be=Te(),ze=function(e){var t=e.stores,n=Te(),r=function(r){var i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n}(r,[]),a=t.model,c=Object(s.pick)(a,ie);f("["+t.id+"] rendering");var l=Object(u.useInjectedEvents)(e,i,{onClick:[we]});return o.a.createElement(n,ke({},c,l))};return r.displayName="HeaderBarWithStore",Object(i.observer)(r)},We=function(){var e=Me(),t=e.stores,n=e.innerApps,r=be(t,n);return{stores:t,app:r,client:r.client,innerApps:n}},je=function(){var e=We();return ke({},e,{HeaderBarWithStore:ze(e)})};n.d(t,"a",function(){return xe}),n.d(t,"DEFAULT_PROPS",function(){return Ce}),n.d(t,"HeaderBarButtons",function(){return Ee}),n.d(t,"HeaderBarIconTexts",function(){return Ie}),n.d(t,"HeaderBarHOC",function(){return Te}),n.d(t,"HeaderBar",function(){return Be}),n.d(t,"HeaderBarAddStore",function(){return ze}),n.d(t,"HeaderBarStoresEnv",function(){return We}),n.d(t,"HeaderBarFactory",function(){return je}),n.d(t,"CONTROLLED_KEYS",function(){return ie}),n.d(t,"HeaderBarModel",function(){return ae}),n.d(t,"createModel",function(){return se}),n.d(t,"createEmptyModel",function(){return ue}),n.d(t,"updateModelAttribute",function(){return le}),n.d(t,"STORE_ID_PREIX",function(){return ye}),n.d(t,"STORES_CONTROLLED_KEYS",function(){return ge}),n.d(t,"ESubApps",function(){return me}),n.d(t,"FACTORY_SUBAPP",function(){return ve}),n.d(t,"Stores",function(){return Se}),n.d(t,"StoresFactory",function(){return Me}),n.d(t,"AppFactory",function(){return be})}]))},function(e,t,n){var r,o,i,a,s,u,c,l,d,f;window,e.exports=(r=n(1),o=n(3),i=n(5),a=n(2),s=n(4),u=n(19),c=n(13),l=n(8),d=n(7),f=n(12),function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t){e.exports=r},function(e,t){e.exports=o},function(e,t){e.exports=i},function(e,t){e.exports=a},function(e,t){e.exports=s},function(e,t){e.exports=u},function(e,t,n){var r,o,i,a,s,u,c,l,d;window,e.exports=(r=n(0),o=n(1),i=n(3),a=n(4),s=n(2),u=n(8),c=n(7),l=n(9),d=n(10),function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t){e.exports=r},function(e,t){e.exports=o},function(e,t){e.exports=i},function(e,t){e.exports=a},function(e,t){e.exports=s},function(e,t){e.exports=u},function(e,t){e.exports=c},function(e,t){e.exports=l},function(e,t){e.exports=d},function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(5),a=n(6),s=n(4),u=n(0),c=Object(s.createDebuggers)("iframe"),l=c.debugBase,d=(c.debugComp,c.debugError),f=c.debugIO,p=(c.debugInteract,c.debugMini),m=(c.debugModel,c.debugRender);function b(e){return"true"===e||!0===e}var h,y=n(7),g=n.n(y).a.div.attrs({style:function(e){return e.style||{}}})(h||(h=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n"],["\n  position: relative;\n  width: 100%;\n  height: 100%;\n"]))),v=n(8),S=n.n(v),O=n(3),M=n.n(O),w=new M.a;w.get("iframe","/iframe",function(e){var t=e.stores,n=e.request.query,r=n&&n.filter&&n.filter.trim().split(",");e.response.body={attributes:t.model.allAttibuteWithFilter(r)},e.response.status=200});var k=n(1),x=u.BASE_CONTROLLED_KEYS.concat(["allowFullScreen","showFullScreenIcon","url","allowEvents"]),C=u.BaseModel.named("IFrameModel").props({allowFullScreen:k.types.optional(k.types.boolean,!0),showFullScreenIcon:k.types.optional(k.types.boolean,!0),url:k.types.optional(k.types.string,""),allowEvents:k.types.array(k.types.string)}).views(function(e){return{allAttibuteWithFilter:function(t){void 0===t&&(t=x);var n=[].concat(t||[]);return Object(s.pick)(e,n)}}}).actions(function(e){return{setAllowFullScreen:function(t){e.allowFullScreen=b(t)},setShowFullScreenIcon:function(t){e.showFullScreenIcon=b(t)},setUrl:function(t){e.url=t},setAllowEvents:function(t){e.allowEvents=[].concat(t)}}}).actions(function(e){return{updateAttribute:function(t,n){return B(e,t,n)}}});function E(e){void 0===e&&(e=U);var t=Object.assign({},U,e),n=t.allowFullScreen,r=t.showFullScreenIcon,o=t.url,i=t.styles,a=t.theme,s=t.allowEvents,u=C.create({allowFullScreen:n,showFullScreenIcon:r,url:o});return u.setStyles(i),u.setTheme(a),u.setAllowEvents(s),u}function I(){return E({})}var T=u.BASE_CONTROLLED_KEYS.concat(["allowFullScreen","showFullScreenIcon","url","styles","allowEvents"]),B=Object(u.updateInScope)(T),z=new M.a;z.post("iframe","/iframe",function(e){var t=e.stores,n=e.request.data.iframe;t.setModel(E(n)),e.response.status=200});var W=new M.a;W.put("iframe","/iframe",function(e){var t=e.stores,n=e.request.data,r=n.name,o=n.value,i=t.model.updateAttribute(r,o);e.response.body={success:i},e.response.status=200}),W.put("updateStyles","/model/styles/:target",Object(u.updateStylesMiddleware)("model")),W.put("updateTheme","/model/theme/:target",Object(u.updateThemeMiddleware)("model"));var j=new M.a;j.del("iframe","/iframe",function(e){var t=e.stores;e.response.body={node:t.resetToEmpty()},e.response.status=200});var F,P=function(e,t){var n=this;void 0===t&&(t={});var r=new S.a({domain:"iframe"});return r.innerApps=t,r.use(function(r,o){return function(e,t,n,r){return new(n||(n=Promise))(function(t,o){function i(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(i,a)}s((r=r.apply(e,[])).next())})}(n,0,void 0,function(){var n;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(i){switch(i.label){case 0:return r.stores=e,r.innerApps=t,n=r.request.url,f("["+e.id+"] request: "+JSON.stringify(r.request.toJSON())),[4,o()];case 1:return i.sent(),f("["+e.id+"] ["+r.request.method+"] "+n+" ==> response: "+JSON.stringify(r.response.toJSON())),[2]}})})}),r.use(w.routes()),r.use(z.routes()),r.use(W.routes()),r.use(j.routes()),r},R=function(){return(R=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},A="sif_",N=["model"];F||(F={});var L={},_=k.types.model("StoresModel",{id:k.types.refinement(k.types.identifier,function(e){return 0===e.indexOf(A)}),model:C}).actions(function(e){return{setModel:function(t){e.model=Object(k.cast)(t)},resetToEmpty:function(){e.model=I()}}}),D=1;function q(){var e=Object(u.getSubAppsFromFactoryMap)(L),t=e.subStores,n=e.subApps,r=e.subClients;return{stores:_.create(R({id:""+A+D++,model:I()},t),{clients:r}),innerApps:n}}var G=function(e){return function(t,n,r){return function(e,t,n,r){return new(n||(n=Promise))(function(e,t){function o(e){try{a(r.next(e))}catch(e){t(e)}}function i(e){try{a(r.throw(e))}catch(e){t(e)}}function a(t){t.done?e(t.value):new n(function(e){e(t.value)}).then(o,i)}a((r=r.apply(void 0,[])).next())})}(0,0,void 0,function(){return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(t){return e.stores,e.client,console.log("load"),[2]})})}},V=function(){return(V=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},U={url:"",allowFullScreen:!1,showFullScreenIcon:!0,styles:{container:{},icon:{}}},H=function(e){var t=function(e){void 0===e&&(e=U);var t=Object.assign({},U,e),n=t.url,i=t.showFullScreenIcon,s=t.allowFullScreen,u=t.styles,c=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(Object(r.useState)(!1),2),f=c[0],m=c[1],b=o.a.useRef(null),h=Object(r.useCallback)(function(t){var n=e.handleFrameTasks,r=e.allowEvents,o=function(e){var t={};try{return!!e.length&&(t=JSON.parse(e),p("=====> 将字符串解析成 JSON 成功"),l("=====> 获得的 JSON 的内容："+t),t)}catch(t){return d("=====> 将字符串解析成 JSON 失败：",t),d("=====> 原字符串内容："+e),!1}}(t.data),i=[].concat(r);o&&i.length&&n&&i.includes(o.event)&&n(o)},[]),y=Object(r.useCallback)(function(){document.fullscreenEnabled||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement?m(!0):m(!1)},[]),v=Object(r.useCallback)(function(){b.current&&(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled?b.current.requestFullscreen?b.current.requestFullscreen():b.current.webkitRequestFullscreen?b.current.webkitRequestFullscreen():b.current.mozRequestFullScreen?b.current.mozRequestFullScreen():b.current.msRequestFullscreen&&b.current.msRequestFullscreen():document.querySelector(".error").innerHTML="Your browser is not supported")},[]);Object(r.useEffect)(function(){return window.addEventListener("message",h),document.addEventListener("webkitfullscreenchange",y),document.addEventListener("mozfullscreenchange",y),document.addEventListener("fullscreenchange",y),document.addEventListener("MSFullscreenChange",y),b.current.onload=function(){var t=e.onLoad;t&&t()},function(){window.removeEventListener("message",h),document.removeEventListener("webkitfullscreenchange",y),document.removeEventListener("mozfullscreenchange",y),document.removeEventListener("fullscreenchange",y),document.removeEventListener("MSFullscreenChange",y)}},[]);var S=Object.assign({},{position:"absolute",fontSize:"20px",right:"10px",top:"10px",cursor:"pointer",color:"#333"},u.icon||{}),O={frameBorder:"0",src:n,target:"_parent",allowFullScreen:s,height:"100%",width:"100%"};return o.a.createElement(g,{style:u.container,className:"ide-iframe-container"},o.a.createElement("iframe",V({ref:b},O)),i?f?o.a.createElement(a.Icon,{style:S,type:"shrink"}):o.a.createElement(a.Icon,{onClick:v,style:S,type:"arrows-alt"}):null)};return t.displayName="IFrameHOC",Object(i.observer)(Object(u.based)(t))},J=H(),Y=function(e){var t=e.stores,n=H(),r=function(r){var i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n}(r,[]),a=t.model,c=Object(s.pick)(a,x);m("["+t.id+"] rendering");var l=Object(u.useInjectedEvents)(e,i,{onLoad:[G]});return o.a.createElement(n,V({},c,l))};return r.displayName="IFrameWithStore",Object(i.observer)(r)},K=function(){var e=q(),t=e.stores,n=e.innerApps,r=P(t,n);return{stores:t,app:r,client:r.client,innerApps:n}},X=function(){var e=K();return V({},e,{IFrameWithStore:Y(e)})};n.d(t,"DEFAULT_PROPS",function(){return U}),n.d(t,"IFrameHOC",function(){return H}),n.d(t,"IFrame",function(){return J}),n.d(t,"IFrameAddStore",function(){return Y}),n.d(t,"IFrameStoresEnv",function(){return K}),n.d(t,"IFrameFactory",function(){return X}),n.d(t,"CONTROLLED_KEYS",function(){return x}),n.d(t,"IFrameModel",function(){return C}),n.d(t,"createModel",function(){return E}),n.d(t,"createEmptyModel",function(){return I}),n.d(t,"updateModelAttribute",function(){return B}),n.d(t,"STORE_ID_PREIX",function(){return A}),n.d(t,"STORES_CONTROLLED_KEYS",function(){return N}),n.d(t,"ESubApps",function(){return F}),n.d(t,"FACTORY_SUBAPP",function(){return L}),n.d(t,"Stores",function(){return _}),n.d(t,"StoresFactory",function(){return q}),n.d(t,"AppFactory",function(){return P})}]))},function(e,t){e.exports=c},function(e,t){e.exports=l},function(e,t){e.exports=d},function(e,t){e.exports=f},function(e,t,n){"use strict";n.r(t);var r=n(3),o=n.n(r),i=n(8),a=n(7),s=n(2),u=n(0),c=n(5),l=n(6),d=n(1),f=Object(s.createDebuggers)("switch-panel"),p=(f.debugBase,f.debugComp,f.debugError,f.debugIO),m=(f.debugInteract,f.debugMini,f.debugModel),b=f.debugRender;function h(e){void 0===e&&(e=se);var t=Object.assign({},se,e);t.panels||(t.panels=[]);var n=t.theme,r=t.styles,o=T.create({selectedIndex:+t.selectedIndex,width:t.width,height:t.height,panels:t.panels.map(function(e){return Object(s.invariant)(!!e.id,"[createModel] panel.id 不能为空"),C.create({id:e.id,title:e.title,type:e.type})})});return o.setStyles(r||{}),o.setTheme(n),o}function y(){return h({})}function g(e){Object(s.invariant)(Object(s.isExist)(e.id),"创建 panel 必须要存在 id 属性");var t=e.id,n=e.title,r=void 0===n?"untitle":n,o=e.type;return C.create({id:t,title:r,type:o})}function v(e,t,n){if(!t)return null;var r=null,o=[].concat(n||[]);return e.panels.some(function(e){if(e.id===t)return r=o.length?Object(s.pick)(e,o):e,!0}),r}var S,O=Object(u.updateInScope)(["id","title","type"]),M=u.BASE_CONTROLLED_KEYS.concat(["selectedIndex","panels","width","height","buttonHeight"]),w=Object(u.updateInScope)(M),k=Object(u.updateInScope)([]),x=["id","title","type"],C=d.types.model("PanelModel",{id:d.types.identifier,title:d.types.optional(d.types.string,""),type:d.types.optional(d.types.string,"")}).views(function(e){return{allAttibuteWithFilter:function(t){if(void 0===t&&(t=x),!t)return e;var n=[].concat(t||[]);return Object(s.pick)(e,n)}}}).actions(function(e){return{setId:function(t){e.id=t},setTitle:function(t){e.title=t},setType:function(t){e.type=t}}}).actions(function(e){return{updateAttribute:function(t,n){return O(e,t,n)}}}),E=Object(u.stringLiterals)("selectedIndex","panels","width","height"),I=u.BASE_CONTROLLED_KEYS.concat(E),T=u.BaseModel.named("SwitchPanelModel").props({height:d.types.optional(d.types.union(d.types.number,d.types.string),"auto"),width:d.types.optional(d.types.union(d.types.number,d.types.string),"auto"),selectedIndex:d.types.optional(d.types.number,0),panels:d.types.array(d.types.late(function(){return C}))}).views(function(e){return{allAttibuteWithFilter:function(t){if(void 0===t&&(t=I),!t)return e;var n=[].concat(t||[]);return Object(s.pick)(e,n)},get panelIds(){return e.panels.map(function(e){return e.id})},findPanel:function(t,n){return v(e,t,n)}}}).actions(function(e){return{setHeight:function(t){e.height=t},setWidth:function(t){e.width=t},setPanels:function(t){void 0===t&&(t=[]),e.panels="string"==typeof t?JSON.parse(t):Object(d.cast)(t)},setSelectedIndex:function(t){e.selectedIndex=+t||0}}}).actions(function(e){return{addPanel:function(t,n){var r=e.panelIds.length;if(t>r||t<0)return m("[addPanel] 目标 index: "+t+" 超出可插入数组范围 [0, "+r+"]"),!1;if(~e.panelIds.indexOf(n.id))return m("[addPanel] 已经存在 id 为 "+n.id+" 的 panel"),!1;var o=g(n),i=e.panels.slice();return i.splice(t,0,o),e.panels=i,!0}}}).actions(function(e){return{updateAttribute:function(t,n){return w(e,t,n)},updateAttributeById:function(t,n,r){if(!t)return!1;var o=e.findPanel(t);return!!o&&o.updateAttribute(n,r)}}}).actions(function(e){return{removePanel:function(t){if(!t)return!1;var n=e.findPanel(t);if(n){var r=n.toJSON();return Object(d.destroy)(n),r}return!1}}}),B=function(){return(B=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},z="ssp_";!function(e){e.codeEditor="codeEditor",e.previewer="previewer"}(S||(S={}));var W=Object.values(S),j={codeEditor:c.Stores,previewer:l.Stores},F={codeEditor:c.CodeEditorFactory,previewer:l.IFrameFactory},P=d.types.model("StoresModel",B({id:d.types.refinement(d.types.identifier,function(e){return 0===e.indexOf(z)})},j,{model:T})).actions(function(e){var t=Object(u.getSubStoresAssigner)(e,W);return B({setModel:function(t){e.model=Object(d.cast)(t)}},t)}).actions(function(e){return{updateAttribute:function(t,n){k(e,t,n)}}}).actions(function(e){return{resetToEmpty:function(){var t=e.model.toJSON();return e.setModel(y()),t}}}),R=1;function A(){var e=Object(u.getSubAppsFromFactoryMap)(F),t=e.subStores,n=e.subApps,r=e.subClients;return{stores:P.create(Object.assign({},B({id:""+z+R++,model:y()},t)),{clients:r}),innerApps:n}}var N=n(10),L=n.n(N),_=n(4),D=n.n(_),q=new D.a;q.get("getPanels","/panels",function(e){var t=e.stores,n=e.request.query,r=n&&n.filter&&n.filter.trim().split(",");Object(u.buildNormalResponse)(e,200,{attributes:t.model.allAttibuteWithFilter(r)})}),q.get("getPanelById","/panels/:id",function(e){var t=e.stores,n=e.request.query,r=e.params.id,o=n&&n.filter&&n.filter.trim().split(",");Object(u.buildNormalResponse)(e,200,{panel:v(t.model,r,o)})}),q.get("getClientByName","/innerApps/:name",u.getInnerAppsMiddleware);var G=new D.a;G.post("createSwitchPanel","/panels",function(e){var t=e.stores,n=e.request.data.schema;t.setModel(h(n)),Object(u.buildNormalResponse)(e,200,{success:!0})}),G.post("addPanelAtIndex","/panels/indexes/:index",function(e){var t=e.stores,n=e.params,r=e.request,o=n.index,i=r.data.panel,a=t.model.panels.length,c=a;Object(s.isExist)(o)&&o>=0&&o<a&&(c=o);var l=t.model.addPanel(c,i);Object(u.buildNormalResponse)(e,200,{success:l,targetIndex:c},"panel(id: "+i.id+") 新增: "+l)});var V=new D.a;V.put("updatePanels","/panels",function(e){return function(e,t,n,r){return new(n||(n=Promise))(function(t,o){function i(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(i,a)}s((r=r.apply(e,[])).next())})}(this,0,void 0,function(){var t,n,r,o,i,a,s;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(c){return t=e.stores,n=e.request,r=n.data,o=r.name,i=r.value,a=t.model[o],s=t.model.updateAttribute(o,i),"height"===o&&t.codeEditor.model.setHeight(i),Object(u.buildNormalResponse)(e,200,{success:s,origin:a},"属性 "+o+" 的值从 "+a+" -> "+i+" 的变更: "+s),[2]})})}),V.put("updatePanelById","/panels/:id",function(e){var t=e.stores,n=e.request.data,r=n.name,o=n.value,i=e.params.id,a=t.model.findPanel(i),s=t.model.updateAttributeById(i,r,o);Object(u.buildNormalResponse)(e,200,{success:s,origin:a},"属性 "+r+" 的值从 "+(a&&a[r])+" -> "+o+" 的变更: "+s)}),V.put("updateSelection","/panels/selection/:id",function(e){var t=e.stores,n=e.params.id;t.model.setSelectedIndex(n),Object(u.buildNormalResponse)(e,200,{success:!0})}),V.put("model","/model/styles/:target",Object(u.updateStylesMiddleware)("model")),V.put("model","/model/theme/:target",Object(u.updateThemeMiddleware)("model"));var U=new D.a;U.del("resetPanels","/panels",function(e){var t=e.stores;Object(u.buildNormalResponse)(e,200,{panels:t.resetToEmpty()})}),U.del("removePanelById","/panels/:id",function(e){var t=e.stores,n=e.params.id;Object(u.buildNormalResponse)(e,200,{panel:t.model.removePanel(n)})});var H,J,Y,K=function(e,t){var n=this,r=new L.a({domain:"switch-panel"});return r.innerApps=t,r.use(function(r,o){return function(e,t,n,r){return new(n||(n=Promise))(function(t,o){function i(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(i,a)}s((r=r.apply(e,[])).next())})}(n,0,void 0,function(){var n;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(i){switch(i.label){case 0:return r.stores=e,r.innerApps=t,n=r.request.url,p("["+e.id+"] request: "+JSON.stringify(r.request.toJSON())),[4,o()];case 1:return i.sent(),p("["+e.id+"] ["+r.request.method+"] "+n+" ==> response: "+JSON.stringify(r.response.toJSON())),[2]}})})}),Object(u.applyProxy)(r,[{name:S.codeEditor,targets:["editor"]},{name:S.previewer,targets:["iframe"]}]),r.use(q.routes()),r.use(G.routes()),r.use(V.routes()),r.use(U.routes()),r},X=n(9),$=n.n(X),Q=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Z=a.Button.Group,ee=$.a.div.withConfig({displayName:"StyledContainer",componentId:"sc-1sap8fi"})(H||(H=Q(["\n  height: ",";\n  width: ",";\n  display: flex;\n  position: relative;\n  flex-flow: column;\n  \n  & .ant-btn-group {\n    display: flex;\n  }\n"],["\n  height: ",";\n  width: ",";\n  display: flex;\n  position: relative;\n  flex-flow: column;\n  \n  & .ant-btn-group {\n    display: flex;\n  }\n"])),function(e){return e.height?" "+e.height+"px":"auto"},function(e){return e.width?e.width+"px":"auto"}),te=$()(Z).withConfig({displayName:"StyledButtonGroup",componentId:"sc-1221tkz"})(J||(J=Q(["\nwidth: ",";\n  left: 0;\n  bottom:0;\n  &.ant-btn-group{\n    position: absolute;\n  }\n"],["\nwidth: ",";\n  left: 0;\n  bottom:0;\n  &.ant-btn-group{\n    position: absolute;\n  }\n"])),function(e){return e.width?e.width+"px":"auto"}),ne=$.a.div.withConfig({displayName:"StyledPanelWrap",componentId:"sc-mzgdsh"})(Y||(Y=Q(["\n  visibility: ",";\n  z-index: ",";\n  position: absolute;\n  left: 0;\n  top: 0; \n"],["\n  visibility: ",";\n  z-index: ",";\n  position: absolute;\n  left: 0;\n  top: 0; \n"])),function(e){return e.visible?"visible":"hidden"},function(e){return e.visible?"inherit":"-1"});function re(e){return function(t,n){var r=e.stores;e.client,r.model.setSelectedIndex(n)}}var oe,ie=function(){return(ie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};!function(e){e.editor="editor",e.iframe="iframe"}(oe||(oe={}));var ae=Object(i.observer)(function(e){var t=e.panels,n=void 0===t?[]:t,i=e.selectedIndex,s=e.onSwitch,u=e.width,c=e.buttonHeight,l=void 0===c?30:c,d=Object(r.useCallback)(function(e,t){return function(n){s&&s(e,t)}},[s]);return n.length&&o.a.createElement(te,{width:u},n.map(function(e,t){var n=e.title;return o.a.createElement(a.Button,{type:i===t?"primary":"default",onClick:d(e,t),style:{flex:"1",borderRadius:0,height:l},size:"large",key:""+t},n)}))||null}),se={selectedIndex:0,buttonHeight:30,panels:[{id:"preview",title:"页面预览",type:oe.iframe},{id:"schema",title:"Schema",type:oe.editor},{id:"fns",title:"回调函数",type:oe.editor}],width:"100%",theme:{main:"#25ab68"},styles:{container:{}}},ue=function(e){var t=function(t){var n=e.CodeEditorComponent,i=e.IFrameComponent,a=Object.assign({},se,t),s=a.codeEditor,u=void 0===s?{}:s,c=a.previewer,l=void 0===c?{}:c,d=a.styles,f=a.panels,p=a.selectedIndex,m=a.height,b=a.width,h=a.buttonHeight;u.width=b,u.height=m,u.visible=!0,l.styles=l.styles||{},l.styles.container=Object.assign({},l.styles.container||{},{width:b,height:m});var y=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(Object(r.useState)(p),2),g=y[0],v=y[1];Object(r.useEffect)(function(){v(t.selectedIndex)},[t.selectedIndex]);var S=Object(r.useCallback)(function(e,n){n!==g&&(v(n),t.onSwitch&&t.onSwitch(e,n))},[t.onSwitch,g]),O=f[+g];return o.a.createElement(ee,{style:d.container,height:m,buttonHeight:h,width:b,className:"ide-switch-panel-container"},o.a.createElement(ne,{visible:O.type===oe.iframe},o.a.createElement(i,ie({},l))),o.a.createElement(ne,{visible:O.type===oe.editor},o.a.createElement(n,ie({},u))),o.a.createElement(ae,{panels:f,width:b,buttonHeight:h,selectedIndex:g,onSwitch:S}))};return t.displayName="SwitchPanelHOC",Object(i.observer)(Object(u.based)(t,se))},ce=ue({CodeEditorComponent:c.CodeEditor,IFrameComponent:l.IFrame}),le=function(e){var t=e.stores,n=ue({CodeEditorComponent:Object(c.CodeEditorAddStore)(Object(u.extracSubEnv)(e,"codeEditor")),IFrameComponent:Object(l.IFrameAddStore)(Object(u.extracSubEnv)(e,"previewer"))}),r=function(r){var i=r.codeEditor,a=void 0===i?{}:i,c=r.previewer,l=void 0===c?{}:c,d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n}(r,["codeEditor","previewer"]),f=t.model,p=Object(s.pick)(f,I);b("["+t.id+"] rendering");var m=Object(u.useInjectedEvents)(e,a,{onChange:[]}),h=Object(u.useInjectedEvents)(e,l,{handleFrameTasks:[]}),y=Object(u.useInjectedEvents)(e,d,{onSwitch:[re]});return o.a.createElement(n,ie({codeEditor:m,previewer:h},p,y))};return r.displayName="SwitchPanelWithStore",Object(i.observer)(r)},de=function(){var e=A(),t=e.stores,n=e.innerApps,r=K(t,n);return{stores:t,app:r,client:r.client,innerApps:n}},fe=function(){var e=de();return ie({},e,{SwitchPanelWithStore:le(e)})};n.d(t,"EPanelType",function(){return oe}),n.d(t,"Panels",function(){return ae}),n.d(t,"DEFAULT_PROPS",function(){return se}),n.d(t,"SwitchPanelHOC",function(){return ue}),n.d(t,"SwitchPanel",function(){return ce}),n.d(t,"SwitchPanelAddStore",function(){return le}),n.d(t,"SwitchPanelStoresEnv",function(){return de}),n.d(t,"SwitchPanelFactory",function(){return fe}),n.d(t,"PANEL_CONTROLLED_KEYS",function(){return x}),n.d(t,"PanelModel",function(){return C}),n.d(t,"CONTROLLED_KEYS",function(){return I}),n.d(t,"SwitchPanelModel",function(){return T}),n.d(t,"createModel",function(){return h}),n.d(t,"createEmptyModel",function(){return y}),n.d(t,"createPanel",function(){return g}),n.d(t,"findById",function(){return v}),n.d(t,"updatePanel",function(){return O}),n.d(t,"updateModelAttribute",function(){return w}),n.d(t,"updateStoresAttribute",function(){return k}),n.d(t,"STORE_ID_PREIX",function(){return z}),n.d(t,"ESubApps",function(){return S}),n.d(t,"NAMES_SUBAPP",function(){return W}),n.d(t,"STORES_SUBAPP",function(){return j}),n.d(t,"FACTORY_SUBAPP",function(){return F}),n.d(t,"Stores",function(){return P}),n.d(t,"StoresFactory",function(){return A}),n.d(t,"AppFactory",function(){return K})}]))},function(e,t){e.exports=l},function(e,t){e.exports=d},function(e,t,n){"use strict";let{useCallback:r,useState:o,useLayoutEffect:i}=n(2);function a(e){return e?{width:e.offsetWidth,height:e.offsetHeight}:{width:0,height:0}}e.exports=function(e){let[t,n]=o(a(e?e.current:{}));const s=r(function(){e.current&&n(a(e.current))},[e]);return i(()=>{if(e.current){if(s(),"function"==typeof ResizeObserver){let t=new ResizeObserver(()=>s());return t.observe(e.current),()=>{t.disconnect(e.current),t=null}}return window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}}},[e.current]),t}},function(e,t,n){"use strict";var r=n(16);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=["alignContent","MozAlignContent","WebkitAlignContent","MSAlignContent","OAlignContent","alignItems","MozAlignItems","WebkitAlignItems","MSAlignItems","OAlignItems","alignSelf","MozAlignSelf","WebkitAlignSelf","MSAlignSelf","OAlignSelf","all","MozAll","WebkitAll","MSAll","OAll","animation","MozAnimation","WebkitAnimation","MSAnimation","OAnimation","animationDelay","MozAnimationDelay","WebkitAnimationDelay","MSAnimationDelay","OAnimationDelay","animationDirection","MozAnimationDirection","WebkitAnimationDirection","MSAnimationDirection","OAnimationDirection","animationDuration","MozAnimationDuration","WebkitAnimationDuration","MSAnimationDuration","OAnimationDuration","animationFillMode","MozAnimationFillMode","WebkitAnimationFillMode","MSAnimationFillMode","OAnimationFillMode","animationIterationCount","MozAnimationIterationCount","WebkitAnimationIterationCount","MSAnimationIterationCount","OAnimationIterationCount","animationName","MozAnimationName","WebkitAnimationName","MSAnimationName","OAnimationName","animationPlayState","MozAnimationPlayState","WebkitAnimationPlayState","MSAnimationPlayState","OAnimationPlayState","animationTimingFunction","MozAnimationTimingFunction","WebkitAnimationTimingFunction","MSAnimationTimingFunction","OAnimationTimingFunction","backfaceVisibility","MozBackfaceVisibility","WebkitBackfaceVisibility","MSBackfaceVisibility","OBackfaceVisibility","background","MozBackground","WebkitBackground","MSBackground","OBackground","backgroundAttachment","MozBackgroundAttachment","WebkitBackgroundAttachment","MSBackgroundAttachment","OBackgroundAttachment","backgroundBlendMode","MozBackgroundBlendMode","WebkitBackgroundBlendMode","MSBackgroundBlendMode","OBackgroundBlendMode","backgroundClip","MozBackgroundClip","WebkitBackgroundClip","MSBackgroundClip","OBackgroundClip","backgroundColor","MozBackgroundColor","WebkitBackgroundColor","MSBackgroundColor","OBackgroundColor","backgroundImage","MozBackgroundImage","WebkitBackgroundImage","MSBackgroundImage","OBackgroundImage","backgroundOrigin","MozBackgroundOrigin","WebkitBackgroundOrigin","MSBackgroundOrigin","OBackgroundOrigin","backgroundPosition","MozBackgroundPosition","WebkitBackgroundPosition","MSBackgroundPosition","OBackgroundPosition","backgroundRepeat","MozBackgroundRepeat","WebkitBackgroundRepeat","MSBackgroundRepeat","OBackgroundRepeat","backgroundSize","MozBackgroundSize","WebkitBackgroundSize","MSBackgroundSize","OBackgroundSize","blockSize","MozBlockSize","WebkitBlockSize","MSBlockSize","OBlockSize","border","MozBorder","WebkitBorder","MSBorder","OBorder","borderBlockEnd","MozBorderBlockEnd","WebkitBorderBlockEnd","MSBorderBlockEnd","OBorderBlockEnd","borderBlockEndColor","MozBorderBlockEndColor","WebkitBorderBlockEndColor","MSBorderBlockEndColor","OBorderBlockEndColor","borderBlockEndStyle","MozBorderBlockEndStyle","WebkitBorderBlockEndStyle","MSBorderBlockEndStyle","OBorderBlockEndStyle","borderBlockEndWidth","MozBorderBlockEndWidth","WebkitBorderBlockEndWidth","MSBorderBlockEndWidth","OBorderBlockEndWidth","borderBlockStart","MozBorderBlockStart","WebkitBorderBlockStart","MSBorderBlockStart","OBorderBlockStart","borderBlockStartColor","MozBorderBlockStartColor","WebkitBorderBlockStartColor","MSBorderBlockStartColor","OBorderBlockStartColor","borderBlockStartStyle","MozBorderBlockStartStyle","WebkitBorderBlockStartStyle","MSBorderBlockStartStyle","OBorderBlockStartStyle","borderBlockStartWidth","MozBorderBlockStartWidth","WebkitBorderBlockStartWidth","MSBorderBlockStartWidth","OBorderBlockStartWidth","borderBottom","MozBorderBottom","WebkitBorderBottom","MSBorderBottom","OBorderBottom","borderBottomColor","MozBorderBottomColor","WebkitBorderBottomColor","MSBorderBottomColor","OBorderBottomColor","borderBottomLeftRadius","MozBorderBottomLeftRadius","WebkitBorderBottomLeftRadius","MSBorderBottomLeftRadius","OBorderBottomLeftRadius","borderBottomRightRadius","MozBorderBottomRightRadius","WebkitBorderBottomRightRadius","MSBorderBottomRightRadius","OBorderBottomRightRadius","borderBottomStyle","MozBorderBottomStyle","WebkitBorderBottomStyle","MSBorderBottomStyle","OBorderBottomStyle","borderBottomWidth","MozBorderBottomWidth","WebkitBorderBottomWidth","MSBorderBottomWidth","OBorderBottomWidth","borderCollapse","MozBorderCollapse","WebkitBorderCollapse","MSBorderCollapse","OBorderCollapse","borderColor","MozBorderColor","WebkitBorderColor","MSBorderColor","OBorderColor","borderImage","MozBorderImage","WebkitBorderImage","MSBorderImage","OBorderImage","borderImageOutset","MozBorderImageOutset","WebkitBorderImageOutset","MSBorderImageOutset","OBorderImageOutset","borderImageRepeat","MozBorderImageRepeat","WebkitBorderImageRepeat","MSBorderImageRepeat","OBorderImageRepeat","borderImageSlice","MozBorderImageSlice","WebkitBorderImageSlice","MSBorderImageSlice","OBorderImageSlice","borderImageSource","MozBorderImageSource","WebkitBorderImageSource","MSBorderImageSource","OBorderImageSource","borderImageWidth","MozBorderImageWidth","WebkitBorderImageWidth","MSBorderImageWidth","OBorderImageWidth","borderInlineEnd","MozBorderInlineEnd","WebkitBorderInlineEnd","MSBorderInlineEnd","OBorderInlineEnd","borderInlineEndColor","MozBorderInlineEndColor","WebkitBorderInlineEndColor","MSBorderInlineEndColor","OBorderInlineEndColor","borderInlineEndStyle","MozBorderInlineEndStyle","WebkitBorderInlineEndStyle","MSBorderInlineEndStyle","OBorderInlineEndStyle","borderInlineEndWidth","MozBorderInlineEndWidth","WebkitBorderInlineEndWidth","MSBorderInlineEndWidth","OBorderInlineEndWidth","borderInlineStart","MozBorderInlineStart","WebkitBorderInlineStart","MSBorderInlineStart","OBorderInlineStart","borderInlineStartColor","MozBorderInlineStartColor","WebkitBorderInlineStartColor","MSBorderInlineStartColor","OBorderInlineStartColor","borderInlineStartStyle","MozBorderInlineStartStyle","WebkitBorderInlineStartStyle","MSBorderInlineStartStyle","OBorderInlineStartStyle","borderInlineStartWidth","MozBorderInlineStartWidth","WebkitBorderInlineStartWidth","MSBorderInlineStartWidth","OBorderInlineStartWidth","borderLeft","MozBorderLeft","WebkitBorderLeft","MSBorderLeft","OBorderLeft","borderLeftColor","MozBorderLeftColor","WebkitBorderLeftColor","MSBorderLeftColor","OBorderLeftColor","borderLeftStyle","MozBorderLeftStyle","WebkitBorderLeftStyle","MSBorderLeftStyle","OBorderLeftStyle","borderLeftWidth","MozBorderLeftWidth","WebkitBorderLeftWidth","MSBorderLeftWidth","OBorderLeftWidth","borderRadius","MozBorderRadius","WebkitBorderRadius","MSBorderRadius","OBorderRadius","borderRight","MozBorderRight","WebkitBorderRight","MSBorderRight","OBorderRight","borderRightColor","MozBorderRightColor","WebkitBorderRightColor","MSBorderRightColor","OBorderRightColor","borderRightStyle","MozBorderRightStyle","WebkitBorderRightStyle","MSBorderRightStyle","OBorderRightStyle","borderRightWidth","MozBorderRightWidth","WebkitBorderRightWidth","MSBorderRightWidth","OBorderRightWidth","borderSpacing","MozBorderSpacing","WebkitBorderSpacing","MSBorderSpacing","OBorderSpacing","borderStyle","MozBorderStyle","WebkitBorderStyle","MSBorderStyle","OBorderStyle","borderTop","MozBorderTop","WebkitBorderTop","MSBorderTop","OBorderTop","borderTopColor","MozBorderTopColor","WebkitBorderTopColor","MSBorderTopColor","OBorderTopColor","borderTopLeftRadius","MozBorderTopLeftRadius","WebkitBorderTopLeftRadius","MSBorderTopLeftRadius","OBorderTopLeftRadius","borderTopRightRadius","MozBorderTopRightRadius","WebkitBorderTopRightRadius","MSBorderTopRightRadius","OBorderTopRightRadius","borderTopStyle","MozBorderTopStyle","WebkitBorderTopStyle","MSBorderTopStyle","OBorderTopStyle","borderTopWidth","MozBorderTopWidth","WebkitBorderTopWidth","MSBorderTopWidth","OBorderTopWidth","borderWidth","MozBorderWidth","WebkitBorderWidth","MSBorderWidth","OBorderWidth","bottom","MozBottom","WebkitBottom","MSBottom","OBottom","boxDecorationBreak","MozBoxDecorationBreak","WebkitBoxDecorationBreak","MSBoxDecorationBreak","OBoxDecorationBreak","boxShadow","MozBoxShadow","WebkitBoxShadow","MSBoxShadow","OBoxShadow","boxSizing","MozBoxSizing","WebkitBoxSizing","MSBoxSizing","OBoxSizing","breakAfter","MozBreakAfter","WebkitBreakAfter","MSBreakAfter","OBreakAfter","breakBefore","MozBreakBefore","WebkitBreakBefore","MSBreakBefore","OBreakBefore","breakInside","MozBreakInside","WebkitBreakInside","MSBreakInside","OBreakInside","captionSide","MozCaptionSide","WebkitCaptionSide","MSCaptionSide","OCaptionSide","caretColor","MozCaretColor","WebkitCaretColor","MSCaretColor","OCaretColor","ch","MozCh","WebkitCh","MSCh","OCh","clear","MozClear","WebkitClear","MSClear","OClear","clip","MozClip","WebkitClip","MSClip","OClip","clipPath","MozClipPath","WebkitClipPath","MSClipPath","OClipPath","cm","MozCm","WebkitCm","MSCm","OCm","color","MozColor","WebkitColor","MSColor","OColor","columnCount","MozColumnCount","WebkitColumnCount","MSColumnCount","OColumnCount","columnFill","MozColumnFill","WebkitColumnFill","MSColumnFill","OColumnFill","columnGap","MozColumnGap","WebkitColumnGap","MSColumnGap","OColumnGap","columnRule","MozColumnRule","WebkitColumnRule","MSColumnRule","OColumnRule","columnRuleColor","MozColumnRuleColor","WebkitColumnRuleColor","MSColumnRuleColor","OColumnRuleColor","columnRuleStyle","MozColumnRuleStyle","WebkitColumnRuleStyle","MSColumnRuleStyle","OColumnRuleStyle","columnRuleWidth","MozColumnRuleWidth","WebkitColumnRuleWidth","MSColumnRuleWidth","OColumnRuleWidth","columnSpan","MozColumnSpan","WebkitColumnSpan","MSColumnSpan","OColumnSpan","columnWidth","MozColumnWidth","WebkitColumnWidth","MSColumnWidth","OColumnWidth","columns","MozColumns","WebkitColumns","MSColumns","OColumns","content","MozContent","WebkitContent","MSContent","OContent","counterIncrement","MozCounterIncrement","WebkitCounterIncrement","MSCounterIncrement","OCounterIncrement","counterReset","MozCounterReset","WebkitCounterReset","MSCounterReset","OCounterReset","cursor","MozCursor","WebkitCursor","MSCursor","OCursor","deg","MozDeg","WebkitDeg","MSDeg","ODeg","direction","MozDirection","WebkitDirection","MSDirection","ODirection","display","MozDisplay","WebkitDisplay","MSDisplay","ODisplay","dpcm","MozDpcm","WebkitDpcm","MSDpcm","ODpcm","dpi","MozDpi","WebkitDpi","MSDpi","ODpi","dppx","MozDppx","WebkitDppx","MSDppx","ODppx","em","MozEm","WebkitEm","MSEm","OEm","emptyCells","MozEmptyCells","WebkitEmptyCells","MSEmptyCells","OEmptyCells","ex","MozEx","WebkitEx","MSEx","OEx","filter","MozFilter","WebkitFilter","MSFilter","OFilter","flexBasis","MozFlexBasis","WebkitFlexBasis","MSFlexBasis","OFlexBasis","flexDirection","MozFlexDirection","WebkitFlexDirection","MSFlexDirection","OFlexDirection","flexFlow","MozFlexFlow","WebkitFlexFlow","MSFlexFlow","OFlexFlow","flexGrow","MozFlexGrow","WebkitFlexGrow","MSFlexGrow","OFlexGrow","flexShrink","MozFlexShrink","WebkitFlexShrink","MSFlexShrink","OFlexShrink","flexWrap","MozFlexWrap","WebkitFlexWrap","MSFlexWrap","OFlexWrap","float","MozFloat","WebkitFloat","MSFloat","OFloat","font","MozFont","WebkitFont","MSFont","OFont","fontFamily","MozFontFamily","WebkitFontFamily","MSFontFamily","OFontFamily","fontFeatureSettings","MozFontFeatureSettings","WebkitFontFeatureSettings","MSFontFeatureSettings","OFontFeatureSettings","fontKerning","MozFontKerning","WebkitFontKerning","MSFontKerning","OFontKerning","fontLanguageOverride","MozFontLanguageOverride","WebkitFontLanguageOverride","MSFontLanguageOverride","OFontLanguageOverride","fontSize","MozFontSize","WebkitFontSize","MSFontSize","OFontSize","fontSizeAdjust","MozFontSizeAdjust","WebkitFontSizeAdjust","MSFontSizeAdjust","OFontSizeAdjust","fontStretch","MozFontStretch","WebkitFontStretch","MSFontStretch","OFontStretch","fontStyle","MozFontStyle","WebkitFontStyle","MSFontStyle","OFontStyle","fontSynthesis","MozFontSynthesis","WebkitFontSynthesis","MSFontSynthesis","OFontSynthesis","fontVariant","MozFontVariant","WebkitFontVariant","MSFontVariant","OFontVariant","fontVariantAlternates","MozFontVariantAlternates","WebkitFontVariantAlternates","MSFontVariantAlternates","OFontVariantAlternates","fontVariantCaps","MozFontVariantCaps","WebkitFontVariantCaps","MSFontVariantCaps","OFontVariantCaps","fontVariantEastAsian","MozFontVariantEastAsian","WebkitFontVariantEastAsian","MSFontVariantEastAsian","OFontVariantEastAsian","fontVariantLigatures","MozFontVariantLigatures","WebkitFontVariantLigatures","MSFontVariantLigatures","OFontVariantLigatures","fontVariantNumeric","MozFontVariantNumeric","WebkitFontVariantNumeric","MSFontVariantNumeric","OFontVariantNumeric","fontVariantPosition","MozFontVariantPosition","WebkitFontVariantPosition","MSFontVariantPosition","OFontVariantPosition","fontWeight","MozFontWeight","WebkitFontWeight","MSFontWeight","OFontWeight","fr","MozFr","WebkitFr","MSFr","OFr","grad","MozGrad","WebkitGrad","MSGrad","OGrad","grid","MozGrid","WebkitGrid","MSGrid","OGrid","gridArea","MozGridArea","WebkitGridArea","MSGridArea","OGridArea","gridAutoColumns","MozGridAutoColumns","WebkitGridAutoColumns","MSGridAutoColumns","OGridAutoColumns","gridAutoFlow","MozGridAutoFlow","WebkitGridAutoFlow","MSGridAutoFlow","OGridAutoFlow","gridAutoRows","MozGridAutoRows","WebkitGridAutoRows","MSGridAutoRows","OGridAutoRows","gridColumn","MozGridColumn","WebkitGridColumn","MSGridColumn","OGridColumn","gridColumnEnd","MozGridColumnEnd","WebkitGridColumnEnd","MSGridColumnEnd","OGridColumnEnd","gridColumnGap","MozGridColumnGap","WebkitGridColumnGap","MSGridColumnGap","OGridColumnGap","gridColumnStart","MozGridColumnStart","WebkitGridColumnStart","MSGridColumnStart","OGridColumnStart","gridGap","MozGridGap","WebkitGridGap","MSGridGap","OGridGap","gridRow","MozGridRow","WebkitGridRow","MSGridRow","OGridRow","gridRowEnd","MozGridRowEnd","WebkitGridRowEnd","MSGridRowEnd","OGridRowEnd","gridRowGap","MozGridRowGap","WebkitGridRowGap","MSGridRowGap","OGridRowGap","gridRowStart","MozGridRowStart","WebkitGridRowStart","MSGridRowStart","OGridRowStart","gridTemplate","MozGridTemplate","WebkitGridTemplate","MSGridTemplate","OGridTemplate","gridTemplateAreas","MozGridTemplateAreas","WebkitGridTemplateAreas","MSGridTemplateAreas","OGridTemplateAreas","gridTemplateColumns","MozGridTemplateColumns","WebkitGridTemplateColumns","MSGridTemplateColumns","OGridTemplateColumns","gridTemplateRows","MozGridTemplateRows","WebkitGridTemplateRows","MSGridTemplateRows","OGridTemplateRows","height","MozHeight","WebkitHeight","MSHeight","OHeight","hyphens","MozHyphens","WebkitHyphens","MSHyphens","OHyphens","hz","MozHz","WebkitHz","MSHz","OHz","imageOrientation","MozImageOrientation","WebkitImageOrientation","MSImageOrientation","OImageOrientation","imageRendering","MozImageRendering","WebkitImageRendering","MSImageRendering","OImageRendering","imageResolution","MozImageResolution","WebkitImageResolution","MSImageResolution","OImageResolution","imeMode","MozImeMode","WebkitImeMode","MSImeMode","OImeMode","in","MozIn","WebkitIn","MSIn","OIn","inherit","MozInherit","WebkitInherit","MSInherit","OInherit","initial","MozInitial","WebkitInitial","MSInitial","OInitial","inlineSize","MozInlineSize","WebkitInlineSize","MSInlineSize","OInlineSize","isolation","MozIsolation","WebkitIsolation","MSIsolation","OIsolation","justifyContent","MozJustifyContent","WebkitJustifyContent","MSJustifyContent","OJustifyContent","khz","MozKhz","WebkitKhz","MSKhz","OKhz","left","MozLeft","WebkitLeft","MSLeft","OLeft","letterSpacing","MozLetterSpacing","WebkitLetterSpacing","MSLetterSpacing","OLetterSpacing","lineBreak","MozLineBreak","WebkitLineBreak","MSLineBreak","OLineBreak","lineHeight","MozLineHeight","WebkitLineHeight","MSLineHeight","OLineHeight","listStyle","MozListStyle","WebkitListStyle","MSListStyle","OListStyle","listStyleImage","MozListStyleImage","WebkitListStyleImage","MSListStyleImage","OListStyleImage","listStylePosition","MozListStylePosition","WebkitListStylePosition","MSListStylePosition","OListStylePosition","listStyleType","MozListStyleType","WebkitListStyleType","MSListStyleType","OListStyleType","margin","MozMargin","WebkitMargin","MSMargin","OMargin","marginBlockEnd","MozMarginBlockEnd","WebkitMarginBlockEnd","MSMarginBlockEnd","OMarginBlockEnd","marginBlockStart","MozMarginBlockStart","WebkitMarginBlockStart","MSMarginBlockStart","OMarginBlockStart","marginBottom","MozMarginBottom","WebkitMarginBottom","MSMarginBottom","OMarginBottom","marginInlineEnd","MozMarginInlineEnd","WebkitMarginInlineEnd","MSMarginInlineEnd","OMarginInlineEnd","marginInlineStart","MozMarginInlineStart","WebkitMarginInlineStart","MSMarginInlineStart","OMarginInlineStart","marginLeft","MozMarginLeft","WebkitMarginLeft","MSMarginLeft","OMarginLeft","marginRight","MozMarginRight","WebkitMarginRight","MSMarginRight","OMarginRight","marginTop","MozMarginTop","WebkitMarginTop","MSMarginTop","OMarginTop","mask","MozMask","WebkitMask","MSMask","OMask","maskClip","MozMaskClip","WebkitMaskClip","MSMaskClip","OMaskClip","maskComposite","MozMaskComposite","WebkitMaskComposite","MSMaskComposite","OMaskComposite","maskImage","MozMaskImage","WebkitMaskImage","MSMaskImage","OMaskImage","maskMode","MozMaskMode","WebkitMaskMode","MSMaskMode","OMaskMode","maskOrigin","MozMaskOrigin","WebkitMaskOrigin","MSMaskOrigin","OMaskOrigin","maskPosition","MozMaskPosition","WebkitMaskPosition","MSMaskPosition","OMaskPosition","maskRepeat","MozMaskRepeat","WebkitMaskRepeat","MSMaskRepeat","OMaskRepeat","maskSize","MozMaskSize","WebkitMaskSize","MSMaskSize","OMaskSize","maskType","MozMaskType","WebkitMaskType","MSMaskType","OMaskType","maxHeight","MozMaxHeight","WebkitMaxHeight","MSMaxHeight","OMaxHeight","maxWidth","MozMaxWidth","WebkitMaxWidth","MSMaxWidth","OMaxWidth","minBlockSize","MozMinBlockSize","WebkitMinBlockSize","MSMinBlockSize","OMinBlockSize","minHeight","MozMinHeight","WebkitMinHeight","MSMinHeight","OMinHeight","minInlineSize","MozMinInlineSize","WebkitMinInlineSize","MSMinInlineSize","OMinInlineSize","minWidth","MozMinWidth","WebkitMinWidth","MSMinWidth","OMinWidth","mixBlendMode","MozMixBlendMode","WebkitMixBlendMode","MSMixBlendMode","OMixBlendMode","mm","MozMm","WebkitMm","MSMm","OMm","ms","MozMs","WebkitMs","MSMs","OMs","objectFit","MozObjectFit","WebkitObjectFit","MSObjectFit","OObjectFit","objectPosition","MozObjectPosition","WebkitObjectPosition","MSObjectPosition","OObjectPosition","offsetBlockEnd","MozOffsetBlockEnd","WebkitOffsetBlockEnd","MSOffsetBlockEnd","OOffsetBlockEnd","offsetBlockStart","MozOffsetBlockStart","WebkitOffsetBlockStart","MSOffsetBlockStart","OOffsetBlockStart","offsetInlineEnd","MozOffsetInlineEnd","WebkitOffsetInlineEnd","MSOffsetInlineEnd","OOffsetInlineEnd","offsetInlineStart","MozOffsetInlineStart","WebkitOffsetInlineStart","MSOffsetInlineStart","OOffsetInlineStart","opacity","MozOpacity","WebkitOpacity","MSOpacity","OOpacity","order","MozOrder","WebkitOrder","MSOrder","OOrder","orphans","MozOrphans","WebkitOrphans","MSOrphans","OOrphans","outline","MozOutline","WebkitOutline","MSOutline","OOutline","outlineColor","MozOutlineColor","WebkitOutlineColor","MSOutlineColor","OOutlineColor","outlineOffset","MozOutlineOffset","WebkitOutlineOffset","MSOutlineOffset","OOutlineOffset","outlineStyle","MozOutlineStyle","WebkitOutlineStyle","MSOutlineStyle","OOutlineStyle","outlineWidth","MozOutlineWidth","WebkitOutlineWidth","MSOutlineWidth","OOutlineWidth","overflow","MozOverflow","WebkitOverflow","MSOverflow","OOverflow","overflowWrap","MozOverflowWrap","WebkitOverflowWrap","MSOverflowWrap","OOverflowWrap","overflowX","MozOverflowX","WebkitOverflowX","MSOverflowX","OOverflowX","overflowY","MozOverflowY","WebkitOverflowY","MSOverflowY","OOverflowY","padding","MozPadding","WebkitPadding","MSPadding","OPadding","paddingBlockEnd","MozPaddingBlockEnd","WebkitPaddingBlockEnd","MSPaddingBlockEnd","OPaddingBlockEnd","paddingBlockStart","MozPaddingBlockStart","WebkitPaddingBlockStart","MSPaddingBlockStart","OPaddingBlockStart","paddingBottom","MozPaddingBottom","WebkitPaddingBottom","MSPaddingBottom","OPaddingBottom","paddingInlineEnd","MozPaddingInlineEnd","WebkitPaddingInlineEnd","MSPaddingInlineEnd","OPaddingInlineEnd","paddingInlineStart","MozPaddingInlineStart","WebkitPaddingInlineStart","MSPaddingInlineStart","OPaddingInlineStart","paddingLeft","MozPaddingLeft","WebkitPaddingLeft","MSPaddingLeft","OPaddingLeft","paddingRight","MozPaddingRight","WebkitPaddingRight","MSPaddingRight","OPaddingRight","paddingTop","MozPaddingTop","WebkitPaddingTop","MSPaddingTop","OPaddingTop","pageBreakAfter","MozPageBreakAfter","WebkitPageBreakAfter","MSPageBreakAfter","OPageBreakAfter","pageBreakBefore","MozPageBreakBefore","WebkitPageBreakBefore","MSPageBreakBefore","OPageBreakBefore","pageBreakInside","MozPageBreakInside","WebkitPageBreakInside","MSPageBreakInside","OPageBreakInside","pc","MozPc","WebkitPc","MSPc","OPc","perspective","MozPerspective","WebkitPerspective","MSPerspective","OPerspective","perspectiveOrigin","MozPerspectiveOrigin","WebkitPerspectiveOrigin","MSPerspectiveOrigin","OPerspectiveOrigin","pointerEvents","MozPointerEvents","WebkitPointerEvents","MSPointerEvents","OPointerEvents","position","MozPosition","WebkitPosition","MSPosition","OPosition","pt","MozPt","WebkitPt","MSPt","OPt","px","MozPx","WebkitPx","MSPx","OPx","q","MozQ","WebkitQ","MSQ","OQ","quotes","MozQuotes","WebkitQuotes","MSQuotes","OQuotes","rad","MozRad","WebkitRad","MSRad","ORad","rem","MozRem","WebkitRem","MSRem","ORem","resize","MozResize","WebkitResize","MSResize","OResize","revert","MozRevert","WebkitRevert","MSRevert","ORevert","right","MozRight","WebkitRight","MSRight","ORight","rubyAlign","MozRubyAlign","WebkitRubyAlign","MSRubyAlign","ORubyAlign","rubyMerge","MozRubyMerge","WebkitRubyMerge","MSRubyMerge","ORubyMerge","rubyPosition","MozRubyPosition","WebkitRubyPosition","MSRubyPosition","ORubyPosition","s","MozS","WebkitS","MSS","OS","scrollBehavior","MozScrollBehavior","WebkitScrollBehavior","MSScrollBehavior","OScrollBehavior","scrollSnapCoordinate","MozScrollSnapCoordinate","WebkitScrollSnapCoordinate","MSScrollSnapCoordinate","OScrollSnapCoordinate","scrollSnapDestination","MozScrollSnapDestination","WebkitScrollSnapDestination","MSScrollSnapDestination","OScrollSnapDestination","scrollSnapType","MozScrollSnapType","WebkitScrollSnapType","MSScrollSnapType","OScrollSnapType","shapeImageThreshold","MozShapeImageThreshold","WebkitShapeImageThreshold","MSShapeImageThreshold","OShapeImageThreshold","shapeMargin","MozShapeMargin","WebkitShapeMargin","MSShapeMargin","OShapeMargin","shapeOutside","MozShapeOutside","WebkitShapeOutside","MSShapeOutside","OShapeOutside","tabSize","MozTabSize","WebkitTabSize","MSTabSize","OTabSize","tableLayout","MozTableLayout","WebkitTableLayout","MSTableLayout","OTableLayout","textAlign","MozTextAlign","WebkitTextAlign","MSTextAlign","OTextAlign","textAlignLast","MozTextAlignLast","WebkitTextAlignLast","MSTextAlignLast","OTextAlignLast","textCombineUpright","MozTextCombineUpright","WebkitTextCombineUpright","MSTextCombineUpright","OTextCombineUpright","textDecoration","MozTextDecoration","WebkitTextDecoration","MSTextDecoration","OTextDecoration","textDecorationColor","MozTextDecorationColor","WebkitTextDecorationColor","MSTextDecorationColor","OTextDecorationColor","textDecorationLine","MozTextDecorationLine","WebkitTextDecorationLine","MSTextDecorationLine","OTextDecorationLine","textDecorationStyle","MozTextDecorationStyle","WebkitTextDecorationStyle","MSTextDecorationStyle","OTextDecorationStyle","textEmphasis","MozTextEmphasis","WebkitTextEmphasis","MSTextEmphasis","OTextEmphasis","textEmphasisColor","MozTextEmphasisColor","WebkitTextEmphasisColor","MSTextEmphasisColor","OTextEmphasisColor","textEmphasisPosition","MozTextEmphasisPosition","WebkitTextEmphasisPosition","MSTextEmphasisPosition","OTextEmphasisPosition","textEmphasisStyle","MozTextEmphasisStyle","WebkitTextEmphasisStyle","MSTextEmphasisStyle","OTextEmphasisStyle","textIndent","MozTextIndent","WebkitTextIndent","MSTextIndent","OTextIndent","textOrientation","MozTextOrientation","WebkitTextOrientation","MSTextOrientation","OTextOrientation","textOverflow","MozTextOverflow","WebkitTextOverflow","MSTextOverflow","OTextOverflow","textRendering","MozTextRendering","WebkitTextRendering","MSTextRendering","OTextRendering","textShadow","MozTextShadow","WebkitTextShadow","MSTextShadow","OTextShadow","textTransform","MozTextTransform","WebkitTextTransform","MSTextTransform","OTextTransform","textUnderlinePosition","MozTextUnderlinePosition","WebkitTextUnderlinePosition","MSTextUnderlinePosition","OTextUnderlinePosition","top","MozTop","WebkitTop","MSTop","OTop","touchAction","MozTouchAction","WebkitTouchAction","MSTouchAction","OTouchAction","transform","MozTransform","WebkitTransform","msTransform","OTransform","transformBox","MozTransformBox","WebkitTransformBox","MSTransformBox","OTransformBox","transformOrigin","MozTransformOrigin","WebkitTransformOrigin","MSTransformOrigin","OTransformOrigin","transformStyle","MozTransformStyle","WebkitTransformStyle","MSTransformStyle","OTransformStyle","transition","MozTransition","WebkitTransition","MSTransition","OTransition","transitionDelay","MozTransitionDelay","WebkitTransitionDelay","MSTransitionDelay","OTransitionDelay","transitionDuration","MozTransitionDuration","WebkitTransitionDuration","MSTransitionDuration","OTransitionDuration","transitionProperty","MozTransitionProperty","WebkitTransitionProperty","MSTransitionProperty","OTransitionProperty","transitionTimingFunction","MozTransitionTimingFunction","WebkitTransitionTimingFunction","MSTransitionTimingFunction","OTransitionTimingFunction","turn","MozTurn","WebkitTurn","MSTurn","OTurn","unicodeBidi","MozUnicodeBidi","WebkitUnicodeBidi","MSUnicodeBidi","OUnicodeBidi","unset","MozUnset","WebkitUnset","MSUnset","OUnset","verticalAlign","MozVerticalAlign","WebkitVerticalAlign","MSVerticalAlign","OVerticalAlign","vh","MozVh","WebkitVh","MSVh","OVh","visibility","MozVisibility","WebkitVisibility","MSVisibility","OVisibility","vmax","MozVmax","WebkitVmax","MSVmax","OVmax","vmin","MozVmin","WebkitVmin","MSVmin","OVmin","vw","MozVw","WebkitVw","MSVw","OVw","whiteSpace","MozWhiteSpace","WebkitWhiteSpace","MSWhiteSpace","OWhiteSpace","widows","MozWidows","WebkitWidows","MSWidows","OWidows","width","MozWidth","WebkitWidth","MSWidth","OWidth","willChange","MozWillChange","WebkitWillChange","MSWillChange","OWillChange","wordBreak","MozWordBreak","WebkitWordBreak","MSWordBreak","OWordBreak","wordSpacing","MozWordSpacing","WebkitWordSpacing","MSWordSpacing","OWordSpacing","wordWrap","MozWordWrap","WebkitWordWrap","MSWordWrap","OWordWrap","writingMode","MozWritingMode","WebkitWritingMode","MSWritingMode","OWritingMode","zIndex","MozZIndex","WebkitZIndex","MSZIndex","OZIndex","fontSize","MozFontSize","WebkitFontSize","MSFontSize","OFontSize","flex","MozFlex","WebkitFlex","MSFlex","OFlex","fr","MozFr","WebkitFr","MSFr","OFr","overflowScrolling","MozOverflowScrolling","WebkitOverflowScrolling","MSOverflowScrolling","OOverflowScrolling","userSelect","MozUserSelect","WebkitUserSelect","MSUserSelect","OUserSelect"]},function(e,t){e.exports=f},function(e,t){e.exports=p},function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(8),a=n(5),s=n(14),u=n.n(s),c=n(1),l=n(0),d=n.n(l),f=n(6),p=n.n(f);function m(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function b(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function h(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){S(e,t,n[t])})}return e}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?k(e):t}m.__suppressDeprecationWarning=!0,b.__suppressDeprecationWarning=!0,h.__suppressDeprecationWarning=!0;var C=function(e){function t(){return y(this,t),x(this,w(t).apply(this,arguments))}return M(t,o.a.PureComponent),v(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.split,i=e.style,a=e.size,s=e.eleRef,u=["Pane",r,n],c=Object.assign({},i||{},{flex:1,position:"relative",outline:"none"});return void 0!==a&&("vertical"===r?c.width=a:(c.height=a,c.display="flex"),c.flex="none"),o.a.createElement("div",{ref:s,className:u.join(" "),style:c},t)}}]),t}();C.propTypes={className:d.a.string.isRequired,children:d.a.node.isRequired,size:d.a.oneOfType([d.a.string,d.a.number]),split:d.a.oneOf(["vertical","horizontal"]),style:p.a,eleRef:d.a.func},C.defaultProps={};var E=function(e){function t(){return y(this,t),x(this,w(t).apply(this,arguments))}return M(t,o.a.Component),v(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onClick,r=e.onDoubleClick,i=e.onMouseDown,a=e.onTouchEnd,s=e.onTouchStart,u=e.resizerClassName,c=e.split,l=e.style,d=[u,c,t];return o.a.createElement("span",{role:"presentation",className:d.join(" "),style:l,onMouseDown:function(e){return i(e)},onTouchStart:function(e){e.preventDefault(),s(e)},onTouchEnd:function(e){e.preventDefault(),a(e)},onClick:function(e){n&&(e.preventDefault(),n(e))},onDoubleClick:function(e){r&&(e.preventDefault(),r(e))}})}}]),t}();function I(e,t){if(e.selection)e.selection.empty();else try{t.getSelection().removeAllRanges()}catch(e){}}function T(e,t,n,r){if("number"==typeof r){var o="number"==typeof t?t:0,i="number"==typeof n&&n>=0?n:1/0;return Math.max(o,Math.min(i,r))}return void 0!==e?e:t}E.propTypes={className:d.a.string.isRequired,onClick:d.a.func,onDoubleClick:d.a.func,onMouseDown:d.a.func.isRequired,onTouchStart:d.a.func.isRequired,onTouchEnd:d.a.func.isRequired,split:d.a.oneOf(["vertical","horizontal"]),style:p.a,resizerClassName:d.a.string.isRequired},E.defaultProps={resizerClassName:"Resizer"};var B=function(e){function t(e){var n;y(this,t),(n=x(this,w(t).call(this,e))).onMouseDown=n.onMouseDown.bind(k(k(n))),n.onTouchStart=n.onTouchStart.bind(k(k(n))),n.onMouseMove=n.onMouseMove.bind(k(k(n))),n.onTouchMove=n.onTouchMove.bind(k(k(n))),n.onMouseUp=n.onMouseUp.bind(k(k(n)));var r=e.size,o=e.defaultSize,i=e.minSize,a=e.maxSize,s=e.primary,u=void 0!==r?r:T(o,i,a,null);return n.state={active:!1,resized:!1,pane1Size:"first"===s?u:void 0,pane2Size:"second"===s?u:void 0,instanceProps:{size:r}},n}return M(t,o.a.Component),v(t,[{key:"componentDidMount",value:function(){document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("touchmove",this.onTouchMove),this.setState(t.getSizeUpdate(this.props,this.state))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("touchmove",this.onTouchMove)}},{key:"onMouseDown",value:function(e){var t=Object.assign({},e,{touches:[{clientX:e.clientX,clientY:e.clientY}]});this.onTouchStart(t)}},{key:"onTouchStart",value:function(e){var t=this.props,n=t.allowResize,r=t.onDragStarted,o=t.split;if(n){I(document,window);var i="vertical"===o?e.touches[0].clientX:e.touches[0].clientY;"function"==typeof r&&r(),this.setState({active:!0,position:i})}}},{key:"onMouseMove",value:function(e){var t=Object.assign({},e,{touches:[{clientX:e.clientX,clientY:e.clientY}]});this.onTouchMove(t)}},{key:"onTouchMove",value:function(e){var t=this.props,n=t.allowResize,r=t.maxSize,o=t.minSize,i=t.onChange,a=t.split,s=t.step,u=this.state,c=u.active,l=u.position;if(n&&c){I(document,window);var d="first"===this.props.primary,f=d?this.pane1:this.pane2,p=d?this.pane2:this.pane1;if(f){var m=f,b=p;if(m.getBoundingClientRect){var h=m.getBoundingClientRect().width,y=m.getBoundingClientRect().height,g="vertical"===a?h:y,v=l-("vertical"===a?e.touches[0].clientX:e.touches[0].clientY);if(s){if(Math.abs(v)<s)return;v=~~(v/s)*s}var O=d?v:-v;parseInt(window.getComputedStyle(m).order)>parseInt(window.getComputedStyle(b).order)&&(O=-O);var M=r;if(void 0!==r&&r<=0){var w=this.splitPane;M="vertical"===a?w.getBoundingClientRect().width+r:w.getBoundingClientRect().height+r}var k=g-O,x=l-v;k<o?k=o:void 0!==r&&k>M?k=M:this.setState({position:x,resized:!0}),i&&i(k),this.setState(S({draggedSize:k},d?"pane1Size":"pane2Size",k))}}}}},{key:"onMouseUp",value:function(){var e=this.props,t=e.allowResize,n=e.onDragFinished,r=this.state,o=r.active,i=r.draggedSize;t&&o&&("function"==typeof n&&n(i),this.setState({active:!1}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.allowResize,r=t.children,i=t.className,a=t.onResizerClick,s=t.onResizerDoubleClick,u=t.paneClassName,c=t.pane1ClassName,l=t.pane2ClassName,d=t.paneStyle,f=t.pane1Style,p=t.pane2Style,m=t.resizerClassName,b=t.resizerStyle,h=t.split,y=t.style,g=this.state,v=g.pane1Size,S=g.pane2Size,M=n?"":"disabled",w=m?"".concat(m," ").concat("Resizer"):m,k=function(e){return o.a.Children.toArray(e).filter(function(e){return e})}(r),x=O({display:"flex",flex:1,height:"100%",position:"absolute",outline:"none",overflow:"hidden",MozUserSelect:"text",WebkitUserSelect:"text",msUserSelect:"text",userSelect:"text"},y);"vertical"===h?Object.assign(x,{flexDirection:"row",left:0,right:0}):Object.assign(x,{bottom:0,flexDirection:"column",minHeight:"100%",top:0,width:"100%"});var I=["SplitPane",i,h,M],T=O({},d,f),B=O({},d,p),z=["Pane1",u,c].join(" "),W=["Pane2",u,l].join(" ");return o.a.createElement("div",{className:I.join(" "),ref:function(t){e.splitPane=t},style:x},o.a.createElement(C,{className:z,key:"pane1",eleRef:function(t){e.pane1=t},size:v,split:h,style:T},k[0]),o.a.createElement(E,{className:M,onClick:a,onDoubleClick:s,onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onTouchEnd:this.onMouseUp,key:"resizer",resizerClassName:w,split:h,style:b||{}}),o.a.createElement(C,{className:W,key:"pane2",eleRef:function(t){e.pane2=t},size:S,split:h,style:B},k[1]))}}],[{key:"getDerivedStateFromProps",value:function(e,n){return t.getSizeUpdate(e,n)}},{key:"getSizeUpdate",value:function(e,t){var n={};if(t.instanceProps.size===e.size&&void 0!==e.size)return{};var r=void 0!==e.size?e.size:T(e.defaultSize,e.minSize,e.maxSize,t.draggedSize);void 0!==e.size&&(n.draggedSize=r);var o="first"===e.primary;return n[o?"pane1Size":"pane2Size"]=r,n[o?"pane2Size":"pane1Size"]=void 0,n.instanceProps={size:e.size},n}}]),t}();B.propTypes={allowResize:d.a.bool,children:d.a.arrayOf(d.a.node).isRequired,className:d.a.string,primary:d.a.oneOf(["first","second"]),minSize:d.a.oneOfType([d.a.string,d.a.number]),maxSize:d.a.oneOfType([d.a.string,d.a.number]),defaultSize:d.a.oneOfType([d.a.string,d.a.number]),size:d.a.oneOfType([d.a.string,d.a.number]),split:d.a.oneOf(["vertical","horizontal"]),onDragStarted:d.a.func,onDragFinished:d.a.func,onChange:d.a.func,onResizerClick:d.a.func,onResizerDoubleClick:d.a.func,style:p.a,resizerStyle:p.a,paneClassName:d.a.string,pane1ClassName:d.a.string,pane2ClassName:d.a.string,paneStyle:p.a,pane1Style:p.a,pane2Style:p.a,resizerClassName:d.a.string,step:d.a.number},B.defaultProps={allowResize:!0,minSize:50,primary:"first",split:"vertical",paneClassName:"",pane1ClassName:"",pane2ClassName:""},function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,r=null,o=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?r="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(r="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?o="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(o="UNSAFE_componentWillUpdate"),null!==n||null!==r||null!==o){var i=e.displayName||e.name,a="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+i+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+(null!==o?"\n  "+o:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=m,t.componentWillReceiveProps=b),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=h;var s=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;s.call(this,e,t,r)}}}(B);var z,W,j,F=B,P=n(10),R=n(9),A=n(11),N=Object(a.createDebuggers)("page-creator"),L=(N.debugBase,N.debugComp,N.debugError,N.debugIO),_=(N.debugInteract,N.debugMini,N.debugModel,N.debugRender),D=n(7),q=n.n(D),G=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},V=q.a.div.attrs({style:function(e){return e.style||{}}})(z||(z=G(["\n  background: ",";\n  height: 100vh;\n\n  .Resizer {\n    background: #333;\n    opacity: 0.2;\n    z-index: 1;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    -moz-background-clip: padding;\n    -webkit-background-clip: padding;\n    background-clip: padding-box;\n  }\n\n  .Resizer:hover {\n    -webkit-transition: all 2s ease;\n    transition: all 2s ease;\n  }\n\n  .Resizer.horizontal {\n    height: 11px;\n    margin: -5px 0;\n    border-top: 5px solid rgba(255, 255, 255, 0);\n    border-bottom: 5px solid rgba(255, 255, 255, 0);\n    cursor: row-resize;\n    width: 100%;\n  }\n\n  .Resizer.horizontal:hover {\n    border-top: 5px solid rgba(0, 0, 0, 0.5);\n    border-bottom: 5px solid rgba(0, 0, 0, 0.5);\n  }\n\n  .Resizer.vertical {\n    width: 11px;\n    margin: 0 -5px;\n    border-left: 5px solid rgba(255, 255, 255, 0);\n    border-right: 5px solid rgba(255, 255, 255, 0);\n    cursor: col-resize;\n  }\n\n  .Resizer.vertical:hover {\n    border-left: 5px solid rgba(0, 0, 0, 0.5);\n    border-right: 5px solid rgba(0, 0, 0, 0.5);\n  }\n  .Resizer.disabled {\n    cursor: inherit;\n  }\n  .Resizer.disabled:hover {\n    border-color: transparent;\n  }\n"],["\n  background: ",";\n  height: 100vh;\n\n  .Resizer {\n    background: #333;\n    opacity: 0.2;\n    z-index: 1;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    -moz-background-clip: padding;\n    -webkit-background-clip: padding;\n    background-clip: padding-box;\n  }\n\n  .Resizer:hover {\n    -webkit-transition: all 2s ease;\n    transition: all 2s ease;\n  }\n\n  .Resizer.horizontal {\n    height: 11px;\n    margin: -5px 0;\n    border-top: 5px solid rgba(255, 255, 255, 0);\n    border-bottom: 5px solid rgba(255, 255, 255, 0);\n    cursor: row-resize;\n    width: 100%;\n  }\n\n  .Resizer.horizontal:hover {\n    border-top: 5px solid rgba(0, 0, 0, 0.5);\n    border-bottom: 5px solid rgba(0, 0, 0, 0.5);\n  }\n\n  .Resizer.vertical {\n    width: 11px;\n    margin: 0 -5px;\n    border-left: 5px solid rgba(255, 255, 255, 0);\n    border-right: 5px solid rgba(255, 255, 255, 0);\n    cursor: col-resize;\n  }\n\n  .Resizer.vertical:hover {\n    border-left: 5px solid rgba(0, 0, 0, 0.5);\n    border-right: 5px solid rgba(0, 0, 0, 0.5);\n  }\n  .Resizer.disabled {\n    cursor: inherit;\n  }\n  .Resizer.disabled:hover {\n    border-color: transparent;\n  }\n"])),function(e){return e.theme.bgColor}),U=q.a.div.attrs({style:function(e){return e.style||{}}})(W||(W=G(["\n  background-color: white;\n  width: 100%;\n  height: 100%;\n"],["\n  background-color: white;\n  width: 100%;\n  height: 100%;\n"]))),H=q.a.div.attrs({style:function(e){return e.style||{}}})(j||(j=G(["\n  background-color: white;\n  width: 100%;\n  height: 100%;\n"],["\n  background-color: white;\n  width: 100%;\n  height: 100%;\n"]))),J=n(12),Y=n.n(J),K=n(3),X=Object(c.stringLiterals)("visible","text"),$=c.BASE_CONTROLLED_KEYS.concat(X),Q=c.BaseModel.named("PageCreatorModel").props({visible:K.types.optional(K.types.boolean,!0),text:K.types.optional(K.types.string,"")}).views(function(e){return{allAttibuteWithFilter:function(t){void 0===t&&(t=$);var n=[].concat(t||[]);return Object(a.pick)(e,n)}}}).actions(function(e){return{setText:function(t){e.text=t},setVisible:function(t){e.visible=!0===t||"true"===t}}}).actions(function(e){return{updateAttribute:function(t,n){return re(e,t,n)}}});function Z(e){void 0===e&&(e=Me);var t=Object.assign({},Me,e),n=t.visible,r=t.text,o=t.theme,i=t.styles,a=Q.create({visible:n,text:r});return a.setStyles(i||{}),a.setTheme(o),a}function ee(){return Z({})}var te,ne=c.BASE_CONTROLLED_KEYS.concat(["visible","text"]),re=Object(c.updateInScope)(ne),oe=function(){return(oe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ie="idepc_",ae=["model"];!function(e){e.componentTree="componentTree",e.headerBar="headerBar",e.switchPanel="switchPanel"}(te||(te={}));var se=Object.values(te),ue={componentTree:R.Stores,headerBar:P.Stores,switchPanel:A.Stores},ce={componentTree:R.ComponentTreeFactory,headerBar:P.HeaderBarFactory,switchPanel:A.SwitchPanelFactory},le=K.types.model("StoresModel",oe({id:K.types.refinement(K.types.identifier,function(e){return 0===e.indexOf(ie)}),model:Q},ue)).actions(function(e){var t=Object(c.getSubStoresAssigner)(e,se);return oe({setModel:function(t){e.model=Object(K.cast)(t)}},t,{resetToEmpty:function(){e.model=ee()}})}),de=1;function fe(){var e=Object(c.getSubAppsFromFactoryMap)(ce),t=e.subStores,n=e.subApps,r=e.subClients;return{stores:le.create(oe({id:""+ie+de++,model:ee()},t),{clients:r}),innerApps:n}}var pe=n(4),me=n.n(pe),be=new me.a;be.get("getModelInstance","/model",function(e){var t=e.stores,n=e.request.query,r=n&&n.filter&&n.filter.trim().split(",");Object(c.buildNormalResponse)(e,200,{attributes:t.model.allAttibuteWithFilter(r)})}),be.get("getClientByName","/innerApps/:name",c.getInnerAppsMiddleware);var he=new me.a;he.post("createModel","/model",function(e){var t=e.stores,n=e.request.data.model;t.setModel(Z(n)),Object(c.buildNormalResponse)(e,200,{success:!0})});var ye=new me.a;ye.put("updateModel","/model",function(e){var t=e.stores,n=e.request.data,r=n.name,o=n.value,i=t.model[r],a=t.model.updateAttribute(r,o);Object(c.buildNormalResponse)(e,200,{success:a,origin:i},"属性 "+r+" 的值从 "+i+" -> "+o+" 的变更: "+a)}),ye.put("updateStyles","/model/styles/:target",Object(c.updateStylesMiddleware)("model")),ye.put("updateTheme","/model/theme/:target",Object(c.updateThemeMiddleware)("model"));var ge=new me.a;ge.del("resetModel","/model",function(e){var t=e.stores;e.response.body={node:t.resetToEmpty()},Object(c.buildNormalResponse)(e,200,{node:t.resetToEmpty()})});var ve=function(e,t){var n=this;void 0===t&&(t={});var r=new Y.a({domain:"page-creator"});return r.innerApps=t,r.use(function(r,o){return function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}(n,void 0,void 0,function(){var n;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(i){switch(i.label){case 0:return r.stores=e,r.innerApps=t,n=r.request.url,L("["+e.id+"] request: "+JSON.stringify(r.request.toJSON())),[4,o()];case 1:return i.sent(),L("["+e.id+"] ["+r.request.method+"] "+n+" ==> response: "+JSON.stringify(r.response.toJSON())),[2]}})})}),Object(c.applyProxy)(r,[{name:te.componentTree,targets:["model","menu","clients"]},{name:te.headerBar,targets:["headerbar"]},{name:te.switchPanel,targets:["panels","clients"]}]),r.use(be.routes()),r.use(he.routes()),r.use(ye.routes()),r.use(ge.routes()),r},Se=function(e){return function(t,n,r){return function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}(void 0,void 0,void 0,function(){var t;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(n){return t=e.stores,e.client,t.model.setVisible(!0),[2]})})}},Oe=function(){return(Oe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Me={theme:{main:"#25ab68",bgColor:"#ececec"},styles:{container:{}}},we=function(e){var t=function(t){var n=e.ComponentTreeComponent,i=e.SwitchPanelComponent,a=e.HeaderBarComponent,s=Object(r.useRef)(null),c=u()(s),l=Object.assign({},Me,t),d=l.componentTree,f=l.switchPanel,p=(l.visible,l.text,l.styles);return f.width=c.width,f.height=c.height,Object(r.useCallback)(function(e){var n=t.onClick;n&&n(e)},[]),o.a.createElement(V,{style:p.container,className:"page-creator-ide-container"},o.a.createElement(F,{split:"horizontal",size:64,allowResize:!1,className:"page-header"},o.a.createElement(a,null),o.a.createElement(F,{split:"vertical",minSize:200,maxSize:300,defaultSize:200},o.a.createElement(U,null,o.a.createElement(n,Oe({},d))),o.a.createElement(H,{ref:s},o.a.createElement(i,Oe({},f))))))};return t.displayName="PageCreatorHOC",Object(i.observer)(Object(c.based)(t,Me))},ke=we({ComponentTreeComponent:R.ComponentTree,HeaderBarComponent:P.HeaderBar,SwitchPanelComponent:A.SwitchPanel}),xe=function(e){var t=e.stores,n=we({ComponentTreeComponent:Object(R.ComponentTreeAddStore)(Object(c.extracSubEnv)(e,"componentTree")),HeaderBarComponent:Object(P.HeaderBarAddStore)(Object(c.extracSubEnv)(e,"headerBar")),SwitchPanelComponent:Object(A.SwitchPanelAddStore)(Object(c.extracSubEnv)(e,"switchPanel"))}),r=function(r){var i=r.componentTree,s=void 0===i?{}:i,u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n}(r,["componentTree"]),l=t.model,d=Object(a.pick)(l,$);_("["+t.id+"] rendering");var f=Object(c.useInjectedEvents)(e,s,{onSelectListItem:[]}),p=Object(c.useInjectedEvents)(e,u,{onClick:[Se]});return o.a.createElement(n,Oe({componentTree:f},d,p))};return r.displayName="PageCreatorWithStore",Object(i.observer)(r)},Ce=function(){var e=fe(),t=e.stores,n=e.innerApps,r=ve(t,n);return{stores:t,app:r,client:r.client,innerApps:n}},Ee=function(){var e=Ce();return Oe({},e,{PageCreatorWithStore:xe(e)})};n.d(t,"DEFAULT_PROPS",function(){return Me}),n.d(t,"PageCreatorHOC",function(){return we}),n.d(t,"PageCreator",function(){return ke}),n.d(t,"PageCreatorAddStore",function(){return xe}),n.d(t,"PageCreatorStoresEnv",function(){return Ce}),n.d(t,"PageCreatorFactory",function(){return Ee}),n.d(t,"CONTROLLED_KEYS",function(){return $}),n.d(t,"PageCreatorModel",function(){return Q}),n.d(t,"createModel",function(){return Z}),n.d(t,"createEmptyModel",function(){return ee}),n.d(t,"updateModelAttribute",function(){return re}),n.d(t,"STORE_ID_PREIX",function(){return ie}),n.d(t,"STORES_CONTROLLED_KEYS",function(){return ae}),n.d(t,"ESubApps",function(){return te}),n.d(t,"NAMES_SUBAPP",function(){return se}),n.d(t,"STORES_SUBAPP",function(){return ue}),n.d(t,"FACTORY_SUBAPP",function(){return ce}),n.d(t,"Stores",function(){return le}),n.d(t,"StoresFactory",function(){return fe}),n.d(t,"AppFactory",function(){return ve})}]))}}]);
//# sourceMappingURL=6-7f35ece36a6264e34788.js.map